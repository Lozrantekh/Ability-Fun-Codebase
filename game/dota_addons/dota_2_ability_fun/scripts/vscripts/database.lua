_G.HERO_LIST = {
	"npc_dota_hero_ancient_apparition",
	"npc_dota_hero_antimage",
	"npc_dota_hero_axe",
	"npc_dota_hero_bane",
	"npc_dota_hero_beastmaster",
	"npc_dota_hero_bloodseeker",
	"npc_dota_hero_chen",
	"npc_dota_hero_crystal_maiden",
	"npc_dota_hero_dark_seer",
	"npc_dota_hero_dazzle",
	"npc_dota_hero_dragon_knight",
	"npc_dota_hero_doom_bringer",
	"npc_dota_hero_drow_ranger",
	"npc_dota_hero_earthshaker",
	"npc_dota_hero_enchantress",
	"npc_dota_hero_enigma",
	"npc_dota_hero_faceless_void",
	"npc_dota_hero_furion",
	"npc_dota_hero_juggernaut",
	"npc_dota_hero_kunkka",
	"npc_dota_hero_leshrac",
	"npc_dota_hero_lich",
	"npc_dota_hero_life_stealer",
	"npc_dota_hero_lina",
	"npc_dota_hero_lion",
	"npc_dota_hero_mirana",
	"npc_dota_hero_morphling",
	"npc_dota_hero_necrolyte",
	"npc_dota_hero_nevermore",
	"npc_dota_hero_night_stalker",
	"npc_dota_hero_omniknight",
	"npc_dota_hero_puck",
	"npc_dota_hero_pudge",
	"npc_dota_hero_pugna",
	"npc_dota_hero_rattletrap",
	"npc_dota_hero_razor",
	"npc_dota_hero_riki",
	"npc_dota_hero_sand_king",
	"npc_dota_hero_shadow_shaman",
	"npc_dota_hero_slardar",
	"npc_dota_hero_sniper",
	"npc_dota_hero_spectre",
	"npc_dota_hero_storm_spirit",
	"npc_dota_hero_sven",
	"npc_dota_hero_tidehunter",
	"npc_dota_hero_tinker",
	"npc_dota_hero_tiny",
	"npc_dota_hero_vengefulspirit",
	"npc_dota_hero_venomancer",
	"npc_dota_hero_viper",
	"npc_dota_hero_weaver",
	"npc_dota_hero_windrunner",
	"npc_dota_hero_witch_doctor",
	"npc_dota_hero_zuus",
	"npc_dota_hero_broodmother",
	"npc_dota_hero_skeleton_king",
	"npc_dota_hero_queenofpain",
	"npc_dota_hero_huskar",
	"npc_dota_hero_jakiro",
	"npc_dota_hero_batrider",
	"npc_dota_hero_warlock",
	"npc_dota_hero_alchemist",
	"npc_dota_hero_death_prophet",
	"npc_dota_hero_ursa",
	"npc_dota_hero_bounty_hunter",
	"npc_dota_hero_silencer",
	"npc_dota_hero_spirit_breaker",
	"npc_dota_hero_invoker",
	"npc_dota_hero_clinkz",
	"npc_dota_hero_obsidian_destroyer",
	"npc_dota_hero_shadow_demon",
	"npc_dota_hero_lycan",
	"npc_dota_hero_lone_druid",
	"npc_dota_hero_brewmaster",
	"npc_dota_hero_phantom_lancer",
	"npc_dota_hero_treant",
	"npc_dota_hero_ogre_magi",
	"npc_dota_hero_chaos_knight",
	"npc_dota_hero_phantom_assassin",
	"npc_dota_hero_gyrocopter",
	"npc_dota_hero_rubick",
	"npc_dota_hero_luna",
	"npc_dota_hero_wisp",
	"npc_dota_hero_disruptor",
	"npc_dota_hero_undying",
	"npc_dota_hero_templar_assassin",
	"npc_dota_hero_naga_siren",
	"npc_dota_hero_nyx_assassin",
	"npc_dota_hero_keeper_of_the_light",
	"npc_dota_hero_visage",
	"npc_dota_hero_meepo",
	"npc_dota_hero_magnataur",
	"npc_dota_hero_centaur",
	"npc_dota_hero_slark",
	"npc_dota_hero_shredder",
	"npc_dota_hero_medusa",
	"npc_dota_hero_troll_warlord",
	"npc_dota_hero_tusk",
	"npc_dota_hero_bristleback",
	"npc_dota_hero_skywrath_mage",
	"npc_dota_hero_elder_titan",
	"npc_dota_hero_abaddon",
	"npc_dota_hero_earth_spirit",
	"npc_dota_hero_ember_spirit",
	"npc_dota_hero_legion_commander",
	"npc_dota_hero_phoenix",
	"npc_dota_hero_terrorblade",
	"npc_dota_hero_techies",
	"npc_dota_hero_oracle",
	"npc_dota_hero_winter_wyvern",
	"npc_dota_hero_arc_warden",
	"npc_dota_hero_abyssal_underlord",
	"npc_dota_hero_monkey_king",
	"npc_dota_hero_dark_willow",
	"npc_dota_hero_pangolier",
	"npc_dota_hero_grimstroke",
	"npc_dota_hero_mars",
	"npc_dota_hero_snapfire",
	"npc_dota_hero_void_spirit",
	"npc_dota_hero_hoodwink",
	"npc_dota_hero_dawnbreaker",
	"npc_dota_hero_marci",
	"npc_dota_hero_primal_beast",
	"npc_dota_hero_muerta",
	"npc_dota_hero_ringmaster",
	"npc_dota_hero_kez",
}

_G.JUNGLE_ABILITIES = {
		"kobold_disarm_hero",
	"berserker_troll_break_hero",
	"hill_troll_rally_hero",
	"fel_beast_haunt_hero",
	"ogre_bruiser_ogre_smash_hero",
	"kobold_taskmaster_speed_aura_hero",
	"forest_troll_high_priest_heal_hero",
	"forest_troll_high_priest_mana_aura_hero",
	"forest_troll_high_priest_heal_amp_aura_hero",
	"centaur_khan_endurance_aura_hero",
	"furbolg_enrage_attack_speed_hero",
	"furbolg_enrage_damage_hero",
	"centaur_khan_war_stomp_hero",
	"gnoll_assassin_envenomed_weapon",
	"ghost_frost_attack",
	"polar_furbolg_ursa_warrior_thunder_clap",
	"mudgolem_cloak_aura",
	"ogre_magi_frost_armor",
	"dark_troll_warlord_ensnare",
	"dark_troll_warlord_raise_dead",
	"giant_wolf_intimidate",
	"alpha_wolf_command_aura",
	"alpha_wolf_critical_strike",
	-- "giant_wolf_critical_strike", -- weaker than alpha_wolf_command_aura
	"ice_shaman_incendiary_bomb_hero",
	"frostbitten_golem_time_warp_aura",
	"ancient_rock_golem_weakening_aura",
	"black_drake_magic_amplification_aura",
	-- "tornado_tempest", --broken
	--"enraged_wildkin_tornado_hero",
	"enraged_wildkin_hurricane",
	-- "flagbearer_creep_aura_effect", -- creep aura, also provides gold for enemy team
	"enraged_wildkin_toughness_aura",
	"granite_golem_hp_aura",
	"spawnlord_aura_hero",
	"spawnlord_master_freeze",
	"spawnlord_master_stomp_hero",
	"satyr_trickster_purge",
	"satyr_hellcaller_shockwave",
	"satyr_hellcaller_unholy_aura",
	"warpine_raider_seed_shot",
	"mud_golem_hurl_boulder_hero",
	"harpy_storm_chain_lightning",
	-- "harpy_scout_take_off", -- uslesses
	"black_dragon_splash_attack_hero",
	"black_dragon_dragonhide_aura",
	"black_dragon_fireball_hero",
	--"blue_dragonspawn_overseer_devotion_aura",
	"big_thunder_lizard_slam_hero",
	"big_thunder_lizard_frenzy_hero",
	"big_thunder_lizard_wardrums_aura",
	
	"roshan_bash_hero",
	"roshan_slam_hero",
	"roshan_spell_block_hero",
	"mud_golem_rock_destroy_Hero",
	"satyr_soulstealer_health_burn",
	
	"warlock_golem_flaming_fists_hero",
	"warlock_golem_permanent_immolation_hero",
	"forged_spirit_melting_strike_hero",
	"scream_of_the_dead",
	"roshan_revengeroar_hero",
	"roshan_grab_and_throw_hero",

	"frogmen_water_bubble_large_hero",
	"frogmen_congregation_of_the_deep_hero",
	"frogmen_riverborn_aura_hero",

	--"item_blood_grenade_hero",
	--"item_dust_hero",
}

_G.EXCLUDED_HERO_TALENTS = {
	--meepo
	--special_bonus_unique_meepo_7 = true,
	--special_bonus_unique_meepo_5 = true,

	--morph
	--special_bonus_unique_morphling_8 = true,

	--rubick
	special_bonus_unique_rubick_6 = true,
	special_bonus_unique_rubick_5 = true,

	--doom
	--special_bonus_unique_doom_3 = true,
	--special_bonus_unique_doom_2 = true,

	--arc warden
	--special_bonus_unique_arc_warden_6 = true,
	special_bonus_unique_arc_warden_8 = true,
}

_G.GOLD_TALENT_EQUIVALENT = {
	level_1 = {"ad_special_bonus_gold_lvl10_r", "ad_special_bonus_gold_lvl10_l"},
	level_2 = {"ad_special_bonus_gold_lvl15_r", "ad_special_bonus_gold_lvl15_l"},
	level_3 = {"ad_special_bonus_gold_lvl20_r", "ad_special_bonus_gold_lvl20_l"},
	level_4 = {"ad_special_bonus_gold_lvl25_r", "ad_special_bonus_gold_lvl25_l"},
}

_G.UNIVERSAL_HERO_TALENTS = {
	special_bonus_unique_viper_5 = true,
}

_G.BASE_HERO_TALENTS = {
	level_1 = {
		--hp
		{talent_name = "special_bonus_hp_150", talent_type = "hp_bonus", item_name = "item_vitality_booster", },
		{talent_name = "special_bonus_hp_175", talent_type = "hp_bonus", item_name = "item_vitality_booster", },
		{talent_name = "special_bonus_hp_200", talent_type = "hp_bonus", item_name = "item_vitality_booster", },

		--hp regen
		{talent_name = "special_bonus_hp_regen_5", talent_type = "hp_regen", item_name = "item_ring_of_health", },
		{talent_name = "special_bonus_hp_regen_6", talent_type = "hp_regen", item_name = "item_ring_of_health", },
		{talent_name = "special_bonus_hp_regen_7", talent_type = "hp_regen", item_name = "item_ring_of_health", },

		--mp
		{talent_name = "special_bonus_mp_150", talent_type = "mana_bonus", item_name = "item_energy_booster", },
		{talent_name = "special_bonus_mp_175", talent_type = "mana_bonus", item_name = "item_energy_booster", },
		{talent_name = "special_bonus_mp_200", talent_type = "mana_bonus", item_name = "item_energy_booster", },

		--mp regen
		{talent_name = "special_bonus_mp_regen_150", talent_type = "mana_regen", item_name = "item_sobi_mask", },
		{talent_name = "special_bonus_mp_regen_175", talent_type = "mana_regen", item_name = "item_sobi_mask", },
		{talent_name = "special_bonus_mp_regen_2", talent_type = "mana_regen", item_name = "item_sobi_mask", },

		--movement speed
		{talent_name = "special_bonus_movement_speed_15", talent_type = "movement_bonus", item_name = "item_boots", },
		{talent_name = "special_bonus_movement_speed_20", talent_type = "movement_bonus", item_name = "item_boots", },

		--attack speed
		{talent_name = "special_bonus_attack_speed_20", talent_type = "attack_speed", item_name = "item_gloves", },
		{talent_name = "special_bonus_attack_speed_25", talent_type = "attack_speed", item_name = "item_gloves", },
		{talent_name = "special_bonus_attack_speed_30", talent_type = "attack_speed", item_name = "item_gloves", },

		--lifesteal
		{talent_name = "special_bonus_lifesteal_8", talent_type = "lifesteal_bonus", item_name = "item_lifesteal", },
		{talent_name = "special_bonus_lifesteal_10", talent_type = "lifesteal_bonus", item_name = "item_lifesteal", },

		--all stats
		{talent_name = "special_bonus_all_stats_4", talent_type = "all_stats_bonus", item_name = "item_ultimate_orb", },
		{talent_name = "special_bonus_all_stats_5", talent_type = "all_stats_bonus", item_name = "item_ultimate_orb", },
		{talent_name = "special_bonus_all_stats_6", talent_type = "all_stats_bonus", item_name = "item_ultimate_orb", },

		--int bonus
		{talent_name = "special_bonus_intelligence_8", talent_type = "int_bonus", item_name = "item_robe", },
		{talent_name = "special_bonus_intelligence_10", talent_type = "int_bonus", item_name = "item_robe", },
		{talent_name = "special_bonus_intelligence_12", talent_type = "int_bonus", item_name = "item_robe", },

		--str bonus
		{talent_name = "special_bonus_strength_8", talent_type = "str_bonus", item_name = "item_belt_of_strength", },
		{talent_name = "special_bonus_strength_10", talent_type = "str_bonus", item_name = "item_belt_of_strength", },
		{talent_name = "special_bonus_strength_12", talent_type = "str_bonus", item_name = "item_belt_of_strength", },

		--agi bonus
		{talent_name = "special_bonus_agility_8", talent_type = "agi_bonus", item_name = "item_boots_of_elves", },
		{talent_name = "special_bonus_agility_10", talent_type = "agi_bonus", item_name = "item_boots_of_elves", },
		{talent_name = "special_bonus_agility_12", talent_type = "agi_bonus", item_name = "item_boots_of_elves", },

		--spell lifesteal
		{talent_name = "special_bonus_spell_lifesteal_8", talent_type = "spell_lifesteal", item_name = "item_voodoo_mask", },
		{talent_name = "special_bonus_spell_lifesteal_10", talent_type = "spell_lifesteal", item_name = "item_voodoo_mask", },

		--armor
		{talent_name = "special_bonus_armor_4", talent_type = "armor_bonus", item_name = "item_ring_of_protection", },
		{talent_name = "special_bonus_armor_5", talent_type = "armor_bonus", item_name = "item_ring_of_protection", },

		--magic resist
		{talent_name = "special_bonus_magic_resistance_6", talent_type = "magic_resist_bonus", item_name = "item_cloak", },
		{talent_name = "special_bonus_magic_resistance_8", talent_type = "magic_resist_bonus", item_name = "item_cloak", },

		--attack dmg
		{talent_name = "special_bonus_attack_damage_20", talent_type = "damage_bonus", item_name = "item_claymore", },
		{talent_name = "special_bonus_attack_damage_25", talent_type = "damage_bonus", item_name = "item_claymore", },
		{talent_name = "special_bonus_attack_damage_30", talent_type = "damage_bonus", item_name = "item_claymore", },

		--base dmg
		{talent_name = "special_bonus_attack_base_damage_15", talent_type = "base_damage_bonus", item_name = "item_blades_of_attack", },
		{talent_name = "special_bonus_attack_base_damage_20", talent_type = "base_damage_bonus", item_name = "item_blades_of_attack", },

		--attack range
		{talent_name = "special_bonus_attack_range_50", talent_type = "attack_range", item_name = "item_dragon_lance", },

		--cast range
		{talent_name = "special_bonus_cast_range_50", talent_type = "cast_range_bonus", item_name = "item_aether_lens", },
		{talent_name = "special_bonus_cast_range_60", talent_type = "cast_range_bonus", item_name = "item_aether_lens", },

		--spell amp
		{talent_name = "special_bonus_spell_amplify_6", talent_type = "spell_amp", item_name = "item_kaya", },
		{talent_name = "special_bonus_spell_amplify_7", talent_type = "spell_amp", item_name = "item_kaya", },
		{talent_name = "special_bonus_spell_amplify_8", talent_type = "spell_amp", item_name = "item_kaya", },

		--bonus cd reduction
		{talent_name = "special_bonus_cooldown_reduction_6", talent_type = "cd_reduction", item_name = "item_octarine_core", },
		{talent_name = "special_bonus_cooldown_reduction_8", talent_type = "cd_reduction", item_name = "item_octarine_core", },

		--evasion
		{talent_name = "special_bonus_evasion_8", talent_type = "evasion_bonus", item_name = "item_talisman_of_evasion", },	
	},

	level_2 = {
		--hp
		{talent_name = "special_bonus_hp_250", talent_type = "hp_bonus", item_name = "item_vitality_booster", },
		{talent_name = "special_bonus_hp_275", talent_type = "hp_bonus", item_name = "item_vitality_booster", },
		{talent_name = "special_bonus_hp_300", talent_type = "hp_bonus", item_name = "item_vitality_booster", },

		--hp regen
		{talent_name = "special_bonus_hp_regen_8", talent_type = "hp_regen", item_name = "item_ring_of_health", },
		{talent_name = "special_bonus_hp_regen_10", talent_type = "hp_regen", item_name = "item_ring_of_health", },
		{talent_name = "special_bonus_hp_regen_12", talent_type = "hp_regen", item_name = "item_ring_of_health", },

		--mp
		{talent_name = "special_bonus_mp_250", talent_type = "mana_bonus", item_name = "item_energy_booster", },
		{talent_name = "special_bonus_mp_275", talent_type = "mana_bonus", item_name = "item_energy_booster", },
		{talent_name = "special_bonus_mp_300", talent_type = "mana_bonus", item_name = "item_energy_booster", },

		--mp regen
		{talent_name = "special_bonus_mp_regen_250", talent_type = "mana_regen", item_name = "item_sobi_mask", },
		{talent_name = "special_bonus_mp_regen_4", talent_type = "mana_regen", item_name = "item_sobi_mask", },

		--movement speed
		{talent_name = "special_bonus_movement_speed_25", talent_type = "movement_bonus", item_name = "item_boots", },
		{talent_name = "special_bonus_movement_speed_30", talent_type = "movement_bonus", item_name = "item_boots", },

		--speed %
		{talent_name = "special_bonus_movement_speed_percentage_5", talent_type = "movement_bonus_pct", item_name = "item_phase_boots", },
		{talent_name = "special_bonus_movement_speed_percentage_6", talent_type = "movement_bonus_pct", item_name = "item_phase_boots", },

		--attack speed
		{talent_name = "special_bonus_attack_speed_35", talent_type = "attack_speed", item_name = "item_gloves", },
		{talent_name = "special_bonus_attack_speed_40", talent_type = "attack_speed", item_name = "item_gloves", },
		{talent_name = "special_bonus_attack_speed_45", talent_type = "attack_speed", item_name = "item_gloves", },

		--armor reduction
		{talent_name = "special_bonus_corruption_25", talent_type = "armor_reduction", item_name = "item_orb_of_destruction", },

		--cleave
		{talent_name = "special_bonus_cleave_20", talent_type = "cleave_bonus", item_name = "item_bfury", },
		{talent_name = "special_bonus_cleave_25", talent_type = "cleave_bonus", item_name = "item_bfury", },

		--lifesteal
		{talent_name = "special_bonus_lifesteal_12", talent_type = "lifesteal_bonus", item_name = "item_lifesteal", },
		{talent_name = "special_bonus_lifesteal_15", talent_type = "lifesteal_bonus", item_name = "item_lifesteal", },

		--all stats
		{talent_name = "special_bonus_all_stats_8", talent_type = "all_stats_bonus", item_name = "item_ultimate_orb", },
		{talent_name = "special_bonus_all_stats_10", talent_type = "all_stats_bonus", item_name = "item_ultimate_orb", },

		--int bonus
		{talent_name = "special_bonus_intelligence_14", talent_type = "int_bonus", item_name = "item_staff_of_wizardry", },
		{talent_name = "special_bonus_intelligence_15", talent_type = "int_bonus", item_name = "item_staff_of_wizardry", },
		{talent_name = "special_bonus_intelligence_16", talent_type = "int_bonus", item_name = "item_staff_of_wizardry", },

		--str bonus
		{talent_name = "special_bonus_strength_14", talent_type = "str_bonus", item_name = "item_ogre_axe", },
		{talent_name = "special_bonus_strength_15", talent_type = "str_bonus", item_name = "item_ogre_axe", },
		{talent_name = "special_bonus_strength_16", talent_type = "str_bonus", item_name = "item_ogre_axe", },

		--agi bonus
		{talent_name = "special_bonus_agility_14", talent_type = "agi_bonus", item_name = "item_blade_of_alacrity", },
		{talent_name = "special_bonus_agility_15", talent_type = "agi_bonus", item_name = "item_blade_of_alacrity", },
		{talent_name = "special_bonus_agility_16", talent_type = "agi_bonus", item_name = "item_blade_of_alacrity", },
		
		--spell lifesteal
		{talent_name = "special_bonus_spell_lifesteal_12", talent_type = "spell_lifesteal", item_name = "item_voodoo_mask", },
		{talent_name = "special_bonus_spell_lifesteal_13", talent_type = "spell_lifesteal", item_name = "item_voodoo_mask", },

		--armor
		{talent_name = "special_bonus_armor_7", talent_type = "armor_bonus", item_name = "item_chainmail", },
		{talent_name = "special_bonus_armor_8", talent_type = "armor_bonus", item_name = "item_chainmail", },

		--status resist
		{talent_name = "special_bonus_status_resistance_10", talent_type = "status_resist", item_name = "item_sange", },

		--magic resist
		{talent_name = "special_bonus_magic_resistance_12", talent_type = "magic_resist_bonus", item_name = "item_cloak", },
		{talent_name = "special_bonus_magic_resistance_14", talent_type = "magic_resist_bonus", item_name = "item_cloak", },
		{talent_name = "special_bonus_magic_resistance_15", talent_type = "magic_resist_bonus", item_name = "item_cloak", },

		--bonus night vision
		{talent_name = "special_bonus_night_vision_400", talent_type = "night_vision", item_name = "item_flying_courier", },

		--attack dmg
		{talent_name = "special_bonus_attack_damage_35", talent_type = "damage_bonus", item_name = "item_claymore", },
		{talent_name = "special_bonus_attack_damage_40", talent_type = "damage_bonus", item_name = "item_demon_edge", },
		{talent_name = "special_bonus_attack_damage_45", talent_type = "damage_bonus", item_name = "item_demon_edge", },

		--base dmg
		{talent_name = "special_bonus_attack_base_damage_25", talent_type = "base_damage_bonus", item_name = "item_blades_of_attack", },
		{talent_name = "special_bonus_attack_base_damage_30", talent_type = "base_damage_bonus", item_name = "item_blades_of_attack", },

		--attack range
		{talent_name = "special_bonus_attack_range_75", talent_type = "attack_range", item_name = "item_dragon_lance", },
		{talent_name = "special_bonus_attack_range_100", talent_type = "attack_range", item_name = "item_dragon_lance", },

		--cast range
		{talent_name = "special_bonus_cast_range_75", talent_type = "cast_range_bonus", item_name = "item_aether_lens", },
		{talent_name = "special_bonus_cast_range_100", talent_type = "cast_range_bonus", item_name = "item_aether_lens", },

		--spell amp
		{talent_name = "special_bonus_spell_amplify_10", talent_type = "spell_amp", item_name = "item_kaya", },
		{talent_name = "special_bonus_spell_amplify_11", talent_type = "spell_amp", item_name = "item_kaya", },
		{talent_name = "special_bonus_spell_amplify_12", talent_type = "spell_amp", item_name = "item_kaya", },

		--bonus cd reduction
		{talent_name = "special_bonus_cooldown_reduction_10", talent_type = "cd_reduction", item_name = "item_octarine_core", },
		{talent_name = "special_bonus_cooldown_reduction_12", talent_type = "cd_reduction", item_name = "item_octarine_core", },

		--respawn reduction
		{talent_name = "special_bonus_respawn_reduction_15", talent_type = "respawn_reduction", item_name = "item_mutation_tombstone" },
		--{talent_name = "special_bonus_respawn_reduction_20", talent_type = "respawn_reduction", item_name = "item_mutation_tombstone" },

		--evasion
		{talent_name = "special_bonus_evasion_12", talent_type = "evasion_bonus", item_name = "item_talisman_of_evasion", },
		{talent_name = "special_bonus_evasion_15", talent_type = "evasion_bonus", item_name = "item_talisman_of_evasion", },

		--other
		{talent_name = "special_bonus_day_vision_400", talent_type = "day_vision", item_name = "item_courier", },
	},

	level_3 = {
		--hp
		{talent_name = "special_bonus_hp_350", talent_type = "hp_bonus", item_name = "item_vitality_booster", },
		{talent_name = "special_bonus_hp_375", talent_type = "hp_bonus", item_name = "item_vitality_booster", },
		{talent_name = "special_bonus_hp_400", talent_type = "hp_bonus", item_name = "item_vitality_booster", },

		--hp regen
		{talent_name = "special_bonus_hp_regen_16", talent_type = "hp_regen", item_name = "item_ring_of_health", },
		{talent_name = "special_bonus_hp_regen_20", talent_type = "hp_regen", item_name = "item_ring_of_health", },

		--mp
		{talent_name = "special_bonus_mp_350", talent_type = "mana_bonus", item_name = "item_energy_booster", },
		{talent_name = "special_bonus_mp_400", talent_type = "mana_bonus", item_name = "item_energy_booster", },

		--mp regen
		{talent_name = "special_bonus_mp_regen_5", talent_type = "mana_regen", item_name = "item_sobi_mask", },
		{talent_name = "special_bonus_mp_regen_6", talent_type = "mana_regen", item_name = "item_sobi_mask", },

		--movement speed
		{talent_name = "special_bonus_movement_speed_35", talent_type = "movement_bonus", item_name = "item_boots", },
		{talent_name = "special_bonus_movement_speed_40", talent_type = "movement_bonus", item_name = "item_boots", },
		{talent_name = "special_bonus_movement_speed_45", talent_type = "movement_bonus", item_name = "item_boots", },

		--speed %
		{talent_name = "special_bonus_movement_speed_percentage_8", talent_type = "movement_bonus_pct", item_name = "item_phase_boots", },
		{talent_name = "special_bonus_movement_speed_percentage_10", talent_type = "movement_bonus_pct", item_name = "item_phase_boots", },
		
		--attack speed
		{talent_name = "special_bonus_attack_speed_55", talent_type = "attack_speed", item_name = "item_hyperstone", },
		{talent_name = "special_bonus_attack_speed_60", talent_type = "attack_speed", item_name = "item_hyperstone", },
		{talent_name = "special_bonus_attack_speed_70", talent_type = "attack_speed", item_name = "item_hyperstone", },

		--armor reduction
		{talent_name = "special_bonus_corruption_3", talent_type = "armor_reduction", item_name = "item_orb_of_destruction", },
		{talent_name = "special_bonus_corruption_4", talent_type = "armor_reduction", item_name = "item_orb_of_destruction", },

		--cleave
		{talent_name = "special_bonus_cleave_35", talent_type = "cleave_bonus", item_name = "item_bfury", },
		{talent_name = "special_bonus_cleave_40", talent_type = "cleave_bonus", item_name = "item_bfury", },

		--mana break
		{talent_name = "special_bonus_mana_break_15", talent_type = "mana_break", item_name = "item_diffusal_blade", },
		{talent_name = "special_bonus_mana_break_20", talent_type = "mana_break", item_name = "item_diffusal_blade", },

		--bonus mana reduction
		{talent_name = "special_bonus_mana_reduction_8", talent_type = "mana_cost_reduction", item_name = "item_elixer", },
		{talent_name = "special_bonus_mana_reduction_9", talent_type = "mana_cost_reduction", item_name = "item_elixer", },

		--lifesteal
		{talent_name = "special_bonus_lifesteal_20", talent_type = "lifesteal_bonus", item_name = "item_lifesteal", },
		{talent_name = "special_bonus_lifesteal_25", talent_type = "lifesteal_bonus", item_name = "item_lifesteal", },

		--all stats
		{talent_name = "special_bonus_all_stats_15", talent_type = "all_stats_bonus", item_name = "item_ultimate_orb", },

		--int bonus
		{talent_name = "special_bonus_intelligence_20", talent_type = "int_bonus", item_name = "item_mystic_staff", },
		{talent_name = "special_bonus_intelligence_25", talent_type = "int_bonus", item_name = "item_mystic_staff", },

		--str bonus
		{talent_name = "special_bonus_strength_20", talent_type = "str_bonus", item_name = "item_reaver", },
		{talent_name = "special_bonus_strength_25", talent_type = "str_bonus", item_name = "item_reaver", },

		--agi bonus
		{talent_name = "special_bonus_agility_20", talent_type = "agi_bonus", item_name = "item_eagle", },
		{talent_name = "special_bonus_agility_25", talent_type = "agi_bonus", item_name = "item_eagle", },

		--spell lifesteal
		{talent_name = "special_bonus_spell_lifesteal_15", talent_type = "spell_lifesteal", item_name = "item_voodoo_mask", },

		--armor
		{talent_name = "special_bonus_armor_10", talent_type = "armor_bonus", item_name = "item_platemail", },
		{talent_name = "special_bonus_armor_12", talent_type = "armor_bonus", item_name = "item_platemail", },

		--status resist
		{talent_name = "special_bonus_status_resistance_15", talent_type = "status_resist", item_name = "item_sange", },
		{talent_name = "special_bonus_status_resistance_20", talent_type = "status_resist", item_name = "item_sange", },

		--magic resist
		{talent_name = "special_bonus_magic_resistance_20", talent_type = "magic_resist_bonus", item_name = "item_cloak", },
		{talent_name = "special_bonus_magic_resistance_25", talent_type = "magic_resist_bonus", item_name = "item_cloak", },

		--bonus night vision
		{talent_name = "special_bonus_night_vision_600", talent_type = "night_vision", item_name = "item_flying_courier", },

		--attack dmg
		{talent_name = "special_bonus_attack_damage_60", talent_type = "damage_bonus", item_name = "item_relic", },
		{talent_name = "special_bonus_attack_damage_65", talent_type = "damage_bonus", item_name = "item_relic", },
		{talent_name = "special_bonus_attack_damage_70", talent_type = "damage_bonus", item_name = "item_relic", },

		--base dmg
		{talent_name = "special_bonus_attack_base_damage_40", talent_type = "base_damage_bonus", item_name = "item_blades_of_attack", },

		--attack range
		{talent_name = "special_bonus_attack_range_125", talent_type = "attack_range", item_name = "item_dragon_lance", },
		{talent_name = "special_bonus_attack_range_150", talent_type = "attack_range", item_name = "item_dragon_lance", },

		--cast range
		{talent_name = "special_bonus_cast_range_125", talent_type = "cast_range_bonus", item_name = "item_aether_lens", },
		{talent_name = "special_bonus_cast_range_150", talent_type = "cast_range_bonus", item_name = "item_aether_lens", },
		{talent_name = "special_bonus_cast_range_175", talent_type = "cast_range_bonus", item_name = "item_aether_lens", },

		--spell amp
		{talent_name = "special_bonus_spell_amplify_15", talent_type = "spell_amp", item_name = "item_kaya",},
		{talent_name = "special_bonus_spell_amplify_16", talent_type = "spell_amp", item_name = "item_kaya",},

		--bonus cd reduction
		{talent_name = "special_bonus_cooldown_reduction_14", talent_type = "cd_reduction", item_name = "item_octarine_core", },
		{talent_name = "special_bonus_cooldown_reduction_15", talent_type = "cd_reduction", item_name = "item_octarine_core", },

		--respawn reduction
		{talent_name = "special_bonus_respawn_reduction_20", talent_type = "respawn_reduction", item_name = "item_mutation_tombstone" },
		--{talent_name = "special_bonus_respawn_reduction_30", talent_type = "respawn_reduction", item_name = "item_mutation_tombstone" },
		--{talent_name = "special_bonus_respawn_reduction_35", talent_type = "respawn_reduction", item_name = "item_mutation_tombstone" },

		--evasion
		{talent_name = "special_bonus_evasion_20", talent_type = "evasion_bonus", item_name = "item_talisman_of_evasion", },
		{talent_name = "special_bonus_evasion_25", talent_type = "evasion_bonus", item_name = "item_talisman_of_evasion", },

		--other
		{talent_name = "special_bonus_20_crit_2", talent_type = "crit_bonus", item_name = "item_greater_crit", },
		{talent_name = "special_bonus_cast_speed_30", talent_type = "cast_speed", item_name = "item_seer_stone", },
		
		--other
		{talent_name = "special_bonus_vision_200", talent_type = "day_vision", item_name = "item_courier", },
	},

	level_4 = {
		--hp
		{talent_name = "special_bonus_hp_600", talent_type = "hp_bonus", item_name = "item_vitality_booster", },
		{talent_name = "special_bonus_hp_650", talent_type = "hp_bonus", item_name = "item_vitality_booster", },
		{talent_name = "special_bonus_hp_700", talent_type = "hp_bonus", item_name = "item_vitality_booster", },

		--hp regen
		{talent_name = "special_bonus_hp_regen_30", talent_type = "hp_regen", item_name = "item_ring_of_health", },
		{talent_name = "special_bonus_hp_regen_35", talent_type = "hp_regen", item_name = "item_ring_of_health", },
		{talent_name = "special_bonus_hp_regen_40", talent_type = "hp_regen", item_name = "item_ring_of_health", },

		--mp
		{talent_name = "special_bonus_mp_600", talent_type = "mana_bonus", item_name = "item_energy_booster", },
		{talent_name = "special_bonus_mp_700", talent_type = "mana_bonus", item_name = "item_energy_booster", },
		{talent_name = "special_bonus_mp_800", talent_type = "mana_bonus", item_name = "item_energy_booster", },

		--mp regen
		{talent_name = "special_bonus_mp_regen_8", talent_type = "mana_regen", item_name = "item_sobi_mask", },
		{talent_name = "special_bonus_mp_regen_10", talent_type = "mana_regen", item_name = "item_sobi_mask", },

		--movement speed
		{talent_name = "special_bonus_movement_speed_50", talent_type = "movement_bonus", item_name = "item_boots", },
		{talent_name = "special_bonus_movement_speed_60", talent_type = "movement_bonus", item_name = "item_boots", },
		{talent_name = "special_bonus_movement_speed_65", talent_type = "movement_bonus", item_name = "item_boots", },

		--attack speed
		{talent_name = "special_bonus_attack_speed_90", talent_type = "attack_speed", item_name = "item_hyperstone", },
		{talent_name = "special_bonus_attack_speed_100", talent_type = "attack_speed", item_name = "item_hyperstone", },
		{talent_name = "special_bonus_attack_speed_120", talent_type = "attack_speed", item_name = "item_hyperstone", },

		--armor reduction
		{talent_name = "special_bonus_corruption_5", talent_type = "armor_reduction", item_name = "item_orb_of_destruction", },

		--cleave
		{talent_name = "special_bonus_cleave_60", talent_type = "cleave_bonus", item_name = "item_bfury", },

		--spell block
		{talent_name = "special_bonus_spell_block_20", talent_type = "spell_block", item_name = "item_sphere", },

		--mana break
		{talent_name = "special_bonus_mana_break_25", talent_type = "mana_break", item_name = "item_diffusal_blade", },
		{talent_name = "special_bonus_mana_break_35", talent_type = "mana_break", item_name = "item_diffusal_blade", },

		--lifesteal
		{talent_name = "special_bonus_lifesteal_35", talent_type = "lifesteal_bonus", item_name = "item_lifesteal", },
		{talent_name = "special_bonus_lifesteal_40", talent_type = "lifesteal_bonus", item_name = "item_lifesteal", },

		--all stats
		{talent_name = "special_bonus_all_stats_20", talent_type = "all_stats_bonus", item_name = "item_ultimate_orb", },

		--int bonus
		{talent_name = "special_bonus_intelligence_35", talent_type = "int_bonus", item_name = "item_mystic_staff", },

		--str bonus
		{talent_name = "special_bonus_strength_35", talent_type = "str_bonus", item_name = "item_reaver", },

		--agi bonus
		{talent_name = "special_bonus_agility_40", talent_type = "agi_bonus", item_name = "item_eagle", },

		--spell lifesteal
		{talent_name = "special_bonus_spell_lifesteal_25", talent_type = "spell_lifesteal", item_name = "item_voodoo_mask", },
		{talent_name = "special_bonus_spell_lifesteal_30", talent_type = "spell_lifesteal", item_name = "item_voodoo_mask", },

		--armor
		{talent_name = "special_bonus_armor_20", talent_type = "armor_bonus", item_name = "item_platemail", },

		--magic resist
		{talent_name = "special_bonus_magic_resistance_30", talent_type = "magic_resist_bonus", item_name = "item_cloak", },
		{talent_name = "special_bonus_magic_resistance_35", talent_type = "magic_resist_bonus", item_name = "item_cloak", },

		--bonus night vision
		{talent_name = "special_bonus_night_vision_1000", talent_type = "night_vision", item_name = "item_flying_courier", },
		
		--attack dmg
		{talent_name = "special_bonus_attack_damage_90", talent_type = "damage_bonus", item_name = "item_rapier", },
		{talent_name = "special_bonus_attack_damage_100", talent_type = "damage_bonus", item_name = "item_rapier", },

		--base dmg
		{talent_name = "special_bonus_attack_base_damage_50", talent_type = "base_damage_bonus", item_name = "item_blades_of_attack", },

		--spell amp
		{talent_name = "special_bonus_spell_amplify_20", talent_type = "spell_amp", item_name = "item_kaya",},
		{talent_name = "special_bonus_spell_amplify_25", talent_type = "spell_amp", item_name = "item_kaya",},

		--attack range
		{talent_name = "special_bonus_attack_range_175", talent_type = "attack_range", item_name = "item_dragon_lance", },
		{talent_name = "special_bonus_attack_range_200", talent_type = "attack_range", item_name = "item_dragon_lance", },

		--cast range
		{talent_name = "special_bonus_cast_range_225", talent_type = "cast_range_bonus", item_name = "item_aether_lens", },
		{talent_name = "special_bonus_cast_range_250", talent_type = "cast_range_bonus", item_name = "item_aether_lens", },
		{talent_name = "special_bonus_cast_range_275", talent_type = "cast_range_bonus", item_name = "item_aether_lens", },

		--bonus cd reduction
		{talent_name = "special_bonus_cooldown_reduction_20", talent_type = "cd_reduction", item_name = "item_octarine_core", },
		{talent_name = "special_bonus_cooldown_reduction_25", talent_type = "cd_reduction", item_name = "item_octarine_core", },
		-- {talent_name = "special_bonus_cooldown_reduction_30", talent_type = "cd_reduction", item_name = "item_octarine_core", },
		-- {talent_name = "special_bonus_cooldown_reduction_50", talent_type = "cd_reduction", item_name = "item_octarine_core", },

		--respawn reduction
		-- {talent_name = "special_bonus_respawn_reduction_40", talent_type = "respawn_reduction", item_name = "item_mutation_tombstone", },
		-- {talent_name = "special_bonus_respawn_reduction_45", talent_type = "respawn_reduction", item_name = "item_mutation_tombstone", },
		-- {talent_name = "special_bonus_respawn_reduction_50", talent_type = "respawn_reduction", item_name = "item_mutation_tombstone", },

		--evasion
		{talent_name = "special_bonus_evasion_30", talent_type = "evasion_bonus", item_name = "item_talisman_of_evasion", },
		{talent_name = "special_bonus_evasion_40", talent_type = "evasion_bonus", item_name = "item_talisman_of_evasion", },

		--other
		--{talent_name = "special_bonus_reincarnation_250", talent_type = "reincarnation", item_name = "item_aegis", },

		{talent_name = "special_bonus_24_crit_2", talent_type = "crit_bonus", item_name = "item_greater_crit", },
		{talent_name = "special_bonus_30_crit_2", talent_type = "crit_bonus", item_name = "item_greater_crit", },
		{talent_name = "special_bonus_20_crit_15", talent_type = "crit_bonus", item_name = "item_greater_crit", },
		{talent_name = "special_bonus_50_crit_40", talent_type = "crit_bonus", item_name = "item_greater_crit", },
	}
}

_G.BASE_SUB_ABILITIES = {
	alchemist_unstable_concoction = "alchemist_unstable_concoction_throw",
	ancient_apparition_ice_blast = "ancient_apparition_ice_blast_release",
	bane_nightmare = "bane_nightmare_end",
	elder_titan_ancestral_spirit = "elder_titan_return_spirit",
	kunkka_x_marks_the_spot = "kunkka_return",
	naga_siren_song_of_the_siren = "naga_siren_song_of_the_siren_cancel",
	tusk_snowball = "tusk_launch_snowball",
	hoodwink_sharpshooter = "hoodwink_sharpshooter_release",
	keeper_of_the_light_illuminate = "keeper_of_the_light_illuminate_end",
	--bane_nightmare_ad_ranked = "bane_nightmare_end_ad_ranked",
	phoenix_sun_ray = "phoenix_sun_ray_stop",
	shredder_chakram = "shredder_return_chakram",
	wisp_tether = "wisp_tether_break",
	dawnbreaker_celestial_hammer = "dawnbreaker_converge",
	dawnbreaker_solar_guardian = "dawnbreaker_land",
	crystal_maiden_freezing_field = "crystal_maiden_freezing_field_stop",
	phoenix_icarus_dive = "phoenix_icarus_dive_stop",
	life_stealer_infest = "life_stealer_consume",
	nyx_assassin_burrow = "nyx_assassin_unburrow",
	tiny_tree_grab = "tiny_toss_tree",
	phoenix_fire_spirits = "phoenix_launch_fire_spirit",
	kez_shodo_sai_ad = "kez_shodo_sai_parry_cancel",
	rubick_telekinesis = "rubick_telekinesis_land",
	ringmaster_tame_the_beasts = "ringmaster_tame_the_beasts_crack",
}

_G.EXCLUDED_BASE_ABILITIES_MELEE_HERO = {
	muerta_gunslinger = false
}

_G.SPECIAL_HERO_ABILITY_NAMES = {
	npc_dota_hero_invoker = {
		base = {
			"invoker_chaos_meteor_ad",
			"invoker_deafening_blast_ad",
			"invoker_tornado_ad",
			"invoker_emp_ad",
			"invoker_alacrity_ad",
			"invoker_cold_snap_ad",
			"invoker_sun_strike_ad",
			"invoker_forge_spirit_ad",
			"invoker_ice_wall_ad",
			"invoker_ghost_walk_ad",
		},
		ultimate = {},
	},

	npc_dota_hero_monkey_king = {
		base = {
			"monkey_king_boundless_strike",
			"monkey_king_tree_dance",
			"monkey_king_jingu_mastery",
		},

		ultimate = {"monkey_king_wukongs_command"},
	},

	npc_dota_hero_alchemist = {
		base = {
			"alchemist_acid_spray",
			"alchemist_unstable_concoction",
			"alchemist_corrosive_weaponry",
		},

		ultimate = {"alchemist_chemical_rage"},
	},

	npc_dota_hero_arc_warden = {
		base = {
			"arc_warden_flux",
			"arc_warden_magnetic_field",
			"arc_warden_spark_wraith"
		},
		ultimate = {"arc_warden_tempest_double"},
	},

	npc_dota_hero_meepo = {
		base = {
			"meepo_earthbind",
			"meepo_poof_ad_ranked",
			"meepo_ransack",
		},
		ultimate = {},
	},

	npc_dota_hero_morphling = {
		base = {
			"morphling_waveform",
			"morphling_adaptive_strike_agi",
			"morphling_morph_agi"
		},
		ultimate = {},
	},

	npc_dota_hero_beastmaster = {
		base = {
			"beastmaster_wild_axes",
			"beastmaster_call_of_the_wild_hawk",
			"beastmaster_inner_beast"
		},
		ultimate = {"beastmaster_primal_roar"},
	},

	npc_dota_hero_bane = {
		base = {
			"bane_enfeeble",
			"bane_brain_sap",
			"bane_nightmare"
		},

		ultimate = {"bane_fiends_grip_lua"},
	},

	npc_dota_hero_doom_bringer = {
		base = {
			"doom_bringer_scorched_earth",
			"doom_bringer_infernal_blade"
		},

		ultimate = {"doom_bringer_doom"},
	},

	npc_dota_hero_ogre_magi = {
		base = {
			"ogre_magi_fireblast",
			"ogre_magi_ignite",
			"ogre_magi_bloodlust",
		},

		ultimate = {"ogre_magi_multicast_custom"},
	},

	npc_dota_hero_tusk = {
		base = {
			"tusk_ice_shards",
			"tusk_snowball",
			"tusk_tag_team",
			"tusk_drinking_buddies",
		},

		ultimate = {"tusk_walrus_punch"},
	},

	npc_dota_hero_rubick = {
		base = {
			"rubick_telekinesis",
			"rubick_fade_bolt",
			"rubick_arcane_supremacy",
		},

		ultimate = {},
	},

	npc_dota_hero_dawnbreaker = {
		base = {
			"dawnbreaker_fire_wreath",
			"dawnbreaker_celestial_hammer",
			"dawnbreaker_luminosity"
		},

		ultimate = {"dawnbreaker_solar_guardian"},
	},

	npc_dota_hero_troll_warlord = {
		base = {
			"troll_warlord_berserkers_rage",
			"troll_warlord_whirling_axes_ranged",
			"troll_warlord_whirling_axes_melee",
			"troll_warlord_fervor",
		},

		ultimate = {"troll_warlord_battle_trance"},
	},

	npc_dota_hero_sniper  = {
		base = {
			"sniper_shrapnel",
			"sniper_headshot",
			"sniper_take_aim",
		},

		ultimate = {"sniper_assassinate"},
	},

	npc_dota_hero_nevermore = {
		base = {
			"shadow_fiend_shadowraze_ad",
			"nevermore_frenzy",
			"nevermore_dark_lord"
		},

		ultimate = {"nevermore_requiem"}
	},

	npc_dota_hero_tinker = {
		base = {
			"tinker_laser",
			"tinker_heat_seeking_missile",
			"tinker_defense_matrix",
			"tinker_march_of_the_machines",
		},

		ultimate = {"tinker_rearm"},
		--ultimate = {"tinker_rearm_ad_2023"},
	},

	npc_dota_hero_mirana = {
		base = {
			"mirana_starfall",
			"mirana_arrow",
			"mirana_leap",
		},

		ultimate = {"mirana_invis", "mirana_solar_flare"}
	},

	npc_dota_hero_faceless_void = {
		base = {
			"faceless_void_time_walk",
			"faceless_void_time_dilation",
			"faceless_void_time_lock",
		},

		ultimate = {"faceless_void_chronosphere", "faceless_void_time_zone"}
	},

	npc_dota_hero_skeleton_king = {
		base = {
			"skeleton_king_hellfire_blast",
			"skeleton_king_mortal_strike",
			"skeleton_king_bone_guard",
			"skeleton_king_spectral_blade",
		},

		ultimate = {"skeleton_king_reincarnation"}
	},

	npc_dota_hero_life_stealer = {
		base = {
			"life_stealer_rage",
			"life_stealer_unfettered",
			"life_stealer_open_wounds",
			"life_stealer_ghoul_frenzy",
		},

		ultimate = {"life_stealer_infest"}
	},

	npc_dota_hero_jakiro = {
		base = {
			"jakiro_dual_breath",
			"jakiro_ice_path",
			"jakiro_liquid_fire",
			"jakiro_liquid_ice",
		},

		ultimate = {"jakiro_macropyre"}
	},

	npc_dota_hero_naga_siren = {
		base = {
			"naga_siren_mirror_image",
			"naga_siren_ensnare",
			"naga_siren_rip_tide",
			"naga_siren_deluge",
		},

		ultimate = {"naga_siren_song_of_the_siren"}
	},

	npc_dota_hero_keeper_of_the_light = {
		base = {
			"keeper_of_the_light_illuminate",
			"keeper_of_the_light_blinding_light",
			"keeper_of_the_light_chakra_magic",
		},

		ultimate = {"keeper_of_the_light_spirit_form"}
	},

	npc_dota_hero_skywrath_mage = {
		base = {
			"skywrath_mage_arcane_bolt",
			"skywrath_mage_concussive_shot",
			"skywrath_mage_ancient_seal",
		},

		ultimate = {"skywrath_mage_mystic_flare"}
	},

	npc_dota_hero_marci = {
		base = {
			"marci_grapple",
			"marci_bodyguard",
			"marci_companion_run",
		},

		ultimate = {"marci_unleash"}
	},

	npc_dota_hero_muerta = {
		base = {
			"muerta_dead_shot",
			"muerta_the_calling",
			"muerta_gunslinger",
		},

		ultimate = {"muerta_pierce_the_veil"}
	},
	
	npc_dota_hero_hoodwink= {
		base = {
		    "hoodwink_acorn_shot",
			"hoodwink_bushwhack",
			"hoodwink_scurry",
			
		},
		ultimate = {"hoodwink_sharpshooter"}
	},
	
	npc_dota_hero_earth_spirit= {
		base = {
		    "earth_spirit_boulder_smash",
			"earth_spirit_rolling_boulder",
			"earth_spirit_geomagnetic_grip",
			
		},
		ultimate = {"earth_spirit_magnetize"}
	},

	npc_dota_hero_disruptor = {
		base = {
		    "disruptor_thunder_strike",
			"disruptor_glimpse",
			"disruptor_kinetic_field",
			"disruptor_kinetic_fence",
			
		},
		ultimate = {"disruptor_static_storm"}
	},

	npc_dota_hero_kez = {
		base = {
		    "kez_echo_slash",
			"kez_grappling_claw",
			"kez_kazurai_katana_ad",
			"kez_falcon_rush",
			"kez_talon_toss",
			"kez_shodo_sai_ad",
		},
		ultimate = {"kez_raptor_dance", "kez_ravens_veil"}
	},

}

--abilities swapped by right click
--also need to be added to REQUIRED_EXTRA_ABILITY (only main ability e.g.kunkka_torrent)
_G.SWAP_ABILITIES = {
	morphling_adaptive_strike_agi = "morphling_adaptive_strike_str",
	morphling_adaptive_strike_str = "morphling_adaptive_strike_agi",

	morphling_morph_agi = "morphling_morph_str",
	morphling_morph_str = "morphling_morph_agi",

	kunkka_torrent = "kunkka_torrent_storm",
	kunkka_torrent_storm = "kunkka_torrent",

	beastmaster_call_of_the_wild_boar = "beastmaster_call_of_the_wild_hawk",
	beastmaster_call_of_the_wild_hawk = "beastmaster_call_of_the_wild_boar",

	antimage_counterspell = "antimage_counterspell_ally",
	antimage_counterspell_ally = "antimage_counterspell",

	tiny_tree_grab = "tiny_tree_channel",
	tiny_tree_channel = "tiny_tree_grab",

	monkey_king_tree_dance = "monkey_king_primal_spring",
	monkey_king_primal_spring = "monkey_king_tree_dance",

	necrolyte_death_pulse = "necrolyte_death_seeker",
	necrolyte_death_seeker = "necrolyte_death_pulse",

	meepo_poof_ad_ranked = "meepo_petrify",
	meepo_petrify = "meepo_poof_ad_ranked",

	bristleback_quill_spray = "bristleback_hairball",
	bristleback_hairball = "bristleback_quill_spray",

	phoenix_sun_ray_stop = "phoenix_sun_ray_toggle_move",
	phoenix_sun_ray_toggle_move = "phoenix_sun_ray_stop",

	ogre_magi_fireblast = "ogre_magi_unrefined_fireblast",
	ogre_magi_unrefined_fireblast = "ogre_magi_fireblast",

	--oracle_purifying_flames = "oracle_rain_of_destiny",
	--oracle_rain_of_destiny = "oracle_purifying_flames",

	brewmaster_drunken_brawler = "brewmaster_primal_companion",
	brewmaster_primal_companion = "brewmaster_drunken_brawler",

	naga_siren_ensnare = "naga_siren_reel_in",
	naga_siren_reel_in = "naga_siren_ensnare",

	terrorblade_metamorphosis = "terrorblade_terror_wave",
	terrorblade_terror_wave = "terrorblade_metamorphosis",

	enchantress_enchant = "enchantress_little_friends",
	enchantress_little_friends = "enchantress_enchant",
	
	--abilities thare are not exactly swapped by autocast but will trigger them in some way after right click
	zuus_arc_lightning = "zuus_lightning_hands",
	shadow_demon_shadow_poison = "shadow_demon_shadow_poison_release",
}

_G.ABILITIES_ACTIVATE_AUTOCAST = {
	zuus_arc_lightning = {
		auto_cast_toggle = "zuus_lightning_hands"
	},

	shadow_demon_shadow_poison = {
		cast = "shadow_demon_shadow_poison_release"
	}
}

_G.SUB_ABILITIES_MODIFICATIONS = {
	toggle = {
		morphling_morph_agi = {
			on_stun = false,
			shard_exception = true
		},
		morphling_morph_str = {
			on_stun = false,
			shard_exception = true
		}
	}
}

-- base abilities that are swapped after happen some scenario
-- this abilities swap to their back abilities (e.g. puck_ethereal_jaunt -> puck_illusory_orb)
_G.SPECIAL_SWAP_ABILITIES_INFO = {
	after_use = {
		puck_illusory_orb = {
			swap_ability = "puck_ethereal_jaunt",
			back_after_inactive = true
		},
		puck_ethereal_jaunt = {
			swap_ability = "puck_illusory_orb",
		},

		faceless_void_time_walk = {
			swap_ability = "faceless_void_time_walk_reverse",
			back_after_inactive = true,
			shard = true,
			min_check_time = 1,
		},

		faceless_void_time_walk_reverse = {
			swap_ability = "faceless_void_time_walk"
		},

		phoenix_sun_ray_toggle_move = {
			swap_ability = "phoenix_sun_ray",
			back_after_inactive = true,
			only_back_swap = true,
			verify_main_ability = true,
		},

		snapfire_gobble_up = {
			swap_ability = "snapfire_spit_creep",
			back_after_inactive = true,
		},

		nyx_assassin_burrow = {
			swap_ability = "nyx_assassin_unburrow",
			back_after_inactive = true,
		},

		monkey_king_mischief = {
			swap_ability = "monkey_king_untransform",
			back_after_inactive = true,
		}
	},

	after_channel = {
		monkey_king_primal_spring = {
			swap_ability = "monkey_king_tree_dance",
		}
	},

	block_swap = {
		monkey_king_tree_dance = {
			no_modifier = "modifier_monkey_king_tree_dance_hidden"
		}
	},

	verify_state = {
		monkey_king_primal_spring = {
			modifier = "modifier_monkey_king_tree_dance_hidden",
			swap_ability = "monkey_king_tree_dance"
		},
	}
}

-- abilities that are required to add to hero to make base ability work correctly
-- also scepter/shard abilities that are new abilities and require new slot (slot 4 and 5) -> only from ultimate
-- also abilities (also scepter/shard new abiities) that are swapped automatically after use base ability (e.g. void time walk -> reverse)
-- required_ability is ability that hero must have to add this ability
_G.REQUIRED_EXTRA_ABILITY = {
	--base abilities
	elder_titan_echo_stomp = {
		elder_titan_ancestral_spirit = {
			required_ability = "",
			set_level = 1,
			hidden = true,
		},
	},

	dazzle_nothl_projection = {
		dazzle_nothl_projection_end = {
			required_ability = "",
			set_level = 1,
			hidden = false,
			slot = 5,
		},
	},

	kez_switch_weapons = {
		kez_kazurai_katana = {
			required_ability = "",
			set_level = 1,
			hidden = false,
		},
		kez_shodo_sai = {
			required_ability = "",
			set_level = 1,
			hidden = true,
		},
	},


	keeper_of_the_light_spirit_form = {
		keeper_of_the_light_radiant_bind = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		},

		keeper_of_the_light_spirit_form_illuminate = {
			required_ability = "keeper_of_the_light_illuminate",
			set_level = 0,
			hidden = true
		},

		keeper_of_the_light_spirit_form_illuminate_end = {
			required_ability = "keeper_of_the_light_illuminate",
			set_level = 0,
			hidden = true
		},

		--this is scepter new ability
		keeper_of_the_light_will_o_wisp = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 5,
		},
	},

	venomancer_noxious_plague = {
		--this is scepter new ability
	--	venomancer_poison_nova = {
	--		required_ability = "",
	--		set_level = 0,
	--		hidden = true,
	--		slot = 5,
	--	},
		--this is shard new ability
	--	venomancer_latent_poison = {
	--		required_ability = "",
	--		set_level = 0,
	--		hidden = true,
	--		slot = 4,
	--	},
	},
	
	ogre_magi_multicast_custom = {
		--this is shard new ability
		ogre_magi_fire_shield_lua = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		},
	},

	visage_gravekeepers_cloak = {
		visage_summon_familiars_stone_form = {
			required_ability = "",
			set_level = 1,
			hidden = false,
		}
	},

	ringmaster_wheel = {
		ringmaster_spotlight = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		},
	},

	templar_assassin_psionic_trap = {
		templar_assassin_trap = {
			required_ability = "",
			set_level = 0,
			hidden = false,
			slot = 4,
		},

		--this is scepter new ability
		templar_assassin_trap_teleport = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 5,
		}
	},

	tinker_rearm = {
		tinker_keen_teleport = {
			required_ability = "",
			set_level = 0,
			hidden = false,
			slot = 5,
		},

		--this is shard new ability
		tinker_warp_grenade = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	puck_illusory_orb = {
		puck_ethereal_jaunt = {
			required_ability = "",
			set_level = 0,
			hidden = true,
		}
	},

	monkey_king_tree_dance = {
		monkey_king_primal_spring = {
			required_ability = "",
			set_level = 0,
			hidden = true,
		},

		monkey_king_primal_spring_early = {
			required_ability = "",
			set_level = 0,
			hidden = true,
		}
	},

	shadow_demon_shadow_poison = {
		shadow_demon_shadow_poison_release = {
			required_ability = "",
			set_level = 0,
			hidden = true,
		}
	},

	earth_spirit_magnetize = {
		earth_spirit_stone_caller = {
			required_ability = "",
			set_level = 1,
			hidden = false,
			slot = 4,
		},

		--this is scepter new ability
		earth_spirit_petrify = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 5,
		}
	},

	visage_summon_familiars = {
		visage_stone_form_self_cast = {
			required_ability = "",
			set_level = 0,
			hidden = false,
			slot = 4,
		},

		visage_silent_as_the_grave = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 5,
		},

		visage_summon_familiars_stone_form = {
			required_ability = "",
			set_level = 0,
			hidden = true,
		}
	},

	ember_spirit_fire_remnant = {
		ember_spirit_activate_fire_remnant = {
			required_ability = "",
			set_level = 0,
			hidden = false,
			slot = 4,
		},
	},

	monkey_king_wukongs_command = {
		monkey_king_mischief = {
			required_ability = "",
			set_level = 0,
			hidden = false,
			slot = 5,
		},

		monkey_king_untransform = {
			required_ability = "",
			set_level = 0,
			hidden = false,
		}
	},

	dark_willow_terrorize = {
		dark_willow_bedlam = {
			required_ability = "",
			set_level = 0,
			hidden = false,
			slot = 4,
		},
	},

	techies_land_mines = {
		techies_minefield_sign = {
			required_ability = "",
			set_level = 0,
			hidden = false,
			slot = 5,
		}
	},

	chaos_knight_chaos_bolt = {
		chaos_knight_phantasm = {
			required_ability = "",
			set_level = 1,
			hidden = true,
		}
	},

	--SCEPTER new abilities
	--currently only new abilities from ultimate are added to slots 4/5 (upgrades from base abilities like kunkka_torrent use rightclick-autocast)
	pudge_dismember = {
		pudge_eject = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	jakiro_macropyre = {
		jakiro_liquid_ice = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 5,
		}
	},

	shredder_chakram = {
		shredder_chakram_2 = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 5,
		},
		shredder_return_chakram_2 = {
			required_ability = "",
			set_level = 0,
			hidden = true,
		},

		--this is shard new ability
		shredder_flamethrower = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	enchantress_untouchable = {
		enchantress_bunny_hop = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4
		}
	},

	beastmaster_primal_roar = {
		beastmaster_drums_of_slom = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 5,
		},

		beastmaster_drums_of_slom_stop = {
			required_ability = "",
			set_level = 0,
			hidden = true,
		},
	},

	snapfire_mortimer_kisses = {
		snapfire_gobble_up = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		},

		snapfire_spit_creep = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 5,
		}
	},

	hoodwink_sharpshooter = {
		hoodwink_decoy = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		},

		hoodwink_hunters_boomerang = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 5,
		}
	},

	antimage_mana_void = {
		antimage_mana_overload = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	bloodseeker_rupture = {
		bloodseeker_blood_mist = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	juggernaut_omni_slash = {
		juggernaut_swift_slash = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	lina_laguna_blade = {
		lina_flame_cloak = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	zuus_thundergods_wrath = {
		zuus_cloud = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	viper_viper_strike = {
		viper_nose_dive = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	rattletrap_hookshot = {
		rattletrap_overclocking = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		},

		--this is shard new ability
		rattletrap_jetpack = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 5,
		}
	},

	oracle_false_promise = {
		oracle_rain_of_destiny = {
			required_ability = "",
			set_level = 0,
			hidden = false,
			slot = 5,
		}
	},

	leshrac_pulse_nova = {
		leshrac_greater_lightning_storm = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	dark_seer_wall_of_replica = {
		dark_seer_normal_punch = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	clinkz_death_pact = {
		clinkz_burning_army = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	broodmother_spawn_spiderlings = {
		broodmother_sticky_snare = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	lycan_shapeshift = {
		lycan_wolf_bite = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	treant_overgrowth = {
		treant_eyes_in_the_forest = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	nyx_assassin_vendetta = {
		nyx_assassin_burrow = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	centaur_stampede = {
		centaur_mount = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		},
		centaur_work_horse = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 5,
		},
	},

	tusk_walrus_punch = {
		tusk_walrus_kick = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	grimstroke_soul_chain = {
		grimstroke_dark_portrait = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	muerta_pierce_the_veil = {
		muerta_parting_shot = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		},
	},

	crystal_maiden_freezing_field = {
		crystal_maiden_crystal_clone = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	spectre_haunt_single = {
		spectre_reality = {
			required_ability = "",
			set_level = 0,
			hidden = false,
			slot = 4,
		},

		spectre_haunt = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 5,
		}
	},

	--right clicked (autocast) - swap Scepter/SHARD abilities
	kunkka_torrent = {
		kunkka_torrent_storm = {
			required_ability = "",
			set_level = 0,
			hidden = true
		}
	},

	antimage_counterspell = {
		antimage_counterspell_ally = {
			required_ability = "",
			set_level = 0,
			hidden = true
		}
	},

	tiny_tree_grab = {
		tiny_tree_channel = {
			required_ability = "",
			set_level = 0,
			hidden = true,
		},
	},

	necrolyte_death_pulse = {
		necrolyte_death_seeker = {
			required_ability = "",
			set_level = 0,
			hidden = true
		}
	},

	enchantress_enchant = {
		enchantress_little_friends = {
			required_ability = "",
			set_level = 0,
			hidden = true
		}
	},

	meepo_poof_ad_ranked = {
		meepo_petrify = {
			required_ability = "",
			set_level = 0,
			hidden = true
		}
	},

	bristleback_quill_spray = {
		bristleback_hairball = {
			required_ability = "",
			set_level = 0,
			hidden = true
		}
	},

	ogre_magi_fireblast = {
		ogre_magi_unrefined_fireblast = {
			required_ability = "",
			set_level = 0,
			hidden = true,
		}
	},

	brewmaster_drunken_brawler = {
		brewmaster_primal_companion = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		},

		--need ult to scepter works
		brewmaster_primal_split = {
			required_ability = "",
			set_level = 1,
			hidden = true
		}
	},

	naga_siren_ensnare = {
		naga_siren_reel_in = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	terrorblade_metamorphosis = {
		terrorblade_terror_wave = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 5,
		}
	},

	--SHARD new abilities
	faceless_void_time_walk = {
		faceless_void_time_walk_reverse = {
			required_ability = "",
			set_level = 0,
			hidden = true,
		}
	},

	zuus_arc_lightning = {
		zuus_lightning_hands = {
			required_ability = "",
			set_level = 0,
			hidden = true,
		}
	},

	medusa_mystic_snake = {
		medusa_cold_blooded = {
			required_ability = "",
			set_level = 0,
			hidden = true,
		}
	},

	alchemist_chemical_rage = {
		alchemist_berserk_potion = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	kunkka_ghostship = {
		kunkka_tidal_wave = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	tidehunter_ravage = {
		tidehunter_dead_in_the_water = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	lich_chain_frost = {
		lich_ice_spire = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	windrunner_focusfire = {
		windrunner_gale_force = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	witch_doctor_death_ward = {
		witch_doctor_voodoo_switcheroo = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	sniper_assassinate = {
		sniper_concussive_grenade = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	phantom_assassin_coup_de_grace = {
		phantom_assassin_fan_of_knives = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	dragon_knight_elder_dragon_form = {
		dragon_knight_fireball = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	furion_wrath_of_nature = {
		furion_curse_of_the_forest = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	life_stealer_infest = {
		life_stealer_open_wounds = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	spirit_breaker_nether_strike = {
		spirit_breaker_planar_pocket = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	shadow_demon_demonic_purge = {
		shadow_demon_demonic_cleanse = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 5,
		}
	},

	slark_shadow_dance = {
		slark_depth_shroud = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	troll_warlord_battle_trance = {
		--troll_warlord_rampage = {
		--	required_ability = "",
		--	set_level = 0,
		--	hidden = true,
		--	slot = 4,
		--}
	},

	magnataur_reverse_polarity = {
		magnataur_horn_toss = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	--skywrath_mage_mystic_flare = {
	--	skywrath_mage_shield_of_the_scion = {
	--		required_ability = "",
	--		set_level = 0,
	--		hidden = true,
	--		slot = 4,
	--	}
	--},

	terrorblade_sunder = {
		terrorblade_demon_zeal = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	pangolier_gyroshell = {
		pangolier_rollup = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		},

		pangolier_rollup_stop = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 5,
		}
	},

	primal_beast_pulverize = {
		primal_beast_rock_throw = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	drow_ranger_marksmanship = {
		drow_ranger_glacier = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 4,
		}
	},

	clinkz_wind_walk = {
		clinkz_burning_barrage = {
			required_ability = "",
			set_level = 0,
			hidden = true,
			slot = 5,
		}
	},

	--base abilities merged to one ability swapped by right-click (autocast)
	--base_ability flag will cause that ability get the same level as main ability
	morphling_adaptive_strike_agi = {
		morphling_adaptive_strike_str = {
			required_ability = "",
			base_ability = true,
			hidden = true,
		}
	},

	morphling_morph_agi = {
		morphling_morph_str = {
			required_ability = "",
			base_ability = true,
			hidden = true,
		}
	},

	beastmaster_call_of_the_wild_hawk = {
		beastmaster_call_of_the_wild_boar = {
			required_ability = "",
			base_ability = true,
			hidden = true,
		}
	},

	phoenix_sun_ray_stop = {
		phoenix_sun_ray_toggle_move = {
			required_ability = "",
			set_level = 0,
			hidden = true
		}
	},
}

--Hidding new abilities that will be swapped by right click or auto swapped (e.g. void time walk)
_G.SHARD_NEW_ABILITIES_HIDDEN = {
	faceless_void_time_walk_reverse = {},
	meepo_petrify = {},
	zuus_lightning_hands = {
		auto_cast_ability = "zuus_arc_lightning",
	},

	medusa_cold_blooded = {},
	bristleback_hairball = {},
	--oracle_rain_of_destiny = {},
	enchantress_little_friends = {},
	necrolyte_death_seeker = {},
	antimage_counterspell_ally = {},

}

_G.SCEPTER_NEW_ABILITIES_HIDDEN = {
	kunkka_torrent_storm = {},
	ogre_magi_unrefined_fireblast = {},
	snapfire_spit_creep = {},
	brewmaster_primal_companion = {},
	naga_siren_reel_in = {},
	terrorblade_terror_wave = {},
	tiny_tree_channel = {}
}

--Shard new abilities thare are not included in the KV file (AbilityDraftShardAbility, AbilityDraftUltShardAbility)
_G.SHARD_NEW_ABILITIES = {
	meepo_poof_ad_ranked = "meepo_petrify",
	drow_ranger_marksmanship = "drow_ranger_glacier",
	jakiro_macropyre = "jakiro_liquid_ice",
	faceless_void_time_walk = "faceless_void_time_walk_reverse",
	zuus_arc_lightning = "zuus_lightning_hands",
	--oracle_purifying_flames = "oracle_rain_of_destiny",
	clinkz_wind_walk = "clinkz_burning_barrage",
	crystal_maiden_freezing_field = "crystal_maiden_crystal_clone",
}

--Scepter new abilities thare are not included in the KV file (AbilityDraftScepterAbility, AbilityDraftUltScepterAbility)
_G.SCEPTER_NEW_ABILITIES = {
	ogre_magi_fireblast = "ogre_magi_unrefined_fireblast",
	muerta_pierce_the_veil = "muerta_parting_shot",
}

_G.HERO_BIND_ABILITIES = {
	--npc_dota_hero_ringmaster = {
	--	ringmaster_dark_carnival_souvenirs = {
	--		hidden = false,
	--	},

	--	ringmaster_empty_souvenir = {
	--		set_level = 1,
	--		hidden = false,
	--	},
	--},

	npc_dota_hero_ogre_magi = {
		ogre_magi_dumb_luck = {
			hidden = false
		}
	},
	npc_dota_hero_skywrath_mage = {
		skywrath_mage_shield_of_the_scion = {
			required_facet = 1,
			hidden = false,
		},
		skywrath_mage_staff_of_the_scion = {
			required_facet = 2,
			hidden = false,
		}
	},

	npc_dota_hero_keeper_of_the_light = {
		keeper_of_the_light_radiant_bind = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},

		keeper_of_the_light_recall = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},

	npc_dota_hero_muerta = {
		muerta_ofrenda = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		}
	},

	--npc_dota_hero_marci = {
	--	marci_special_delivery = {
	---		set_level = 1,
	--		hidden = false,
	--	},
	--},
	
	npc_dota_hero_axe= {
		axe_one_man_army = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},
	},

	npc_dota_hero_drow_ranger= {
		drow_ranger_vantage_point = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_juggernaut= {
		juggernaut_bladeform = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_morphling = {
		morphling_ebb = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},
		morphling_flow = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	npc_dota_hero_razor= {
		razor_dynamo = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_sven = {
		sven_wrath_of_god = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_tiny = {
		tiny_insurmountable = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_vengefulspirit= {
		vengefulspirit_soul_strike = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_lina= {
		lina_slow_burn = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	
	
	npc_dota_hero_tidehunter= {
		tidehunter_krill_eater = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_enigma = {
		enigma_event_horizon = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},

		enigma_splitting_image = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		}
	},
	
	npc_dota_hero_warlock= {
		warlock_black_grimoire = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_queenofpain = {
		queenofpain_succubus = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},

		queenofpain_masochist = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		}
	},
	
	npc_dota_hero_dazzle = {
		dazzle_nothl_boon = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_leshrac = {
		leshrac_chronoptic_nourishment = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_dark_seer= {
		dark_seer_quick_wit = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},

		dark_seer_heart_of_battle = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		}
	},
	
	npc_dota_hero_omniknight = {
		omniknight_healing_hammer = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	
	 npc_dota_hero_night_stalker = {
		night_stalker_night_reign = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	 
	 npc_dota_hero_batrider = {
		batrider_stoked = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},
	},
	 
	npc_dota_hero_doom_bringer = {
		doom_bringer_devils_bargain = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	
	
	npc_dota_hero_ursa = {
		ursa_bear_down = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_silencer = {
		silencer_irrepressible = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_shadow_demon = {
		shadow_demon_shadow_servant = {
			required_facet = 2,
			set_level = 5,
			hidden = false,
		},
	},

	npc_dota_hero_shadow_shaman = {
		shadow_shaman_voodoo_hands = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_lone_druid = {
		lone_druid_bear_necessities = {
			required_facet = 3,
			set_level = 4,
			hidden = false,
		},
	},
	
	npc_dota_hero_chaos_knight = {
		--chaos_knight_phantasmagoria = {
		--	required_facet = 1,
		--	set_level = 1,
		--	hidden = false,
		--},

		chaos_knight_fundamental_forging = {
			required_facet = 1,
			set_level = 1,
			hidden = false,

		},
	},
	 
	npc_dota_hero_meepo = {
		meepo_pack_rat = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_nyx_assassin = {
		nyx_assassin_innate_mana_burn = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},
	},

	npc_dota_hero_medusa = {
		medusa_mana_shield = {
			hidden = true,
			equivalent = "medusa_mana_shield"
		},

		medusa_venomed_volley = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},

	npc_dota_hero_centaur= {
		centaur_horsepower = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_abaddon= {
		abaddon_the_quickening = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_elder_titan= {
		elder_titan_momentum = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_phoenix= {
		phoenix_dying_light = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},
	},
	
	npc_dota_hero_oracle = {
		oracle_clairvoyant_curse = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},

		oracle_clairvoyant_cure = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		}
	},
	
	npc_dota_hero_techies = {
		techies_squees_scope = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},

		techies_spoons_stash = {
			required_facet = 3,
			set_level = 1,
			hidden = false,
		}
	},
	
	npc_dota_hero_winter_wyvern = {
		winter_wyvern_essence_of_the_blueheart = {
			required_facet = 1,
			set_level = 1,
			hidden = false,
		},

		winter_wyvern_dragon_sight = {
			required_facet = 2,
			set_level = 1,
			hidden = false,
		}
	},
	
	npc_dota_hero_abyssal_underlord = {
		abyssal_underlord_abyssal_horde = {
			required_facet = 2,
			set_level = 0,
			hidden_false,
		}
	},
}

_G.REQUIRED_BASE_ABILITY_MODIFIERS = {
	modifier_faceless_void_time_walk_tracker = true,
	modifier_weaver_timelapse = true,
	modifier_ember_spirit_fire_remnant_charge_counter = true,
	modifier_ember_spirit_fire_remnant_thinker = true,
	modifier_ember_spirit_fire_remnant_timer = true,
	modifier_sand_king_shard = true,
}

_G.AUTO_LEVELLED_ABILITIES = {
	monkey_king_mischief = true,
	alchemist_goblins_greed = true,
	medusa_mana_shield = true,
}

--not exluced scepter abilities need to have new ability with _no_scepter_info postfix.
_G.EXCLUDED_STRONG_ILLUSION_ABILITIES = {
	snapfire_gobble_up = true,
	snapfire_spit_creep = true,
}

_G.EXCLUDED_ILLUSIONS_ABILITIES = {
	roshan_bash_hero = true,
	kobold_disarm_hero = true,
	berserker_troll_break_hero = true,
}

--TURBO RULES:
_G.TURBO_GOLD_REASON_DOUBLED = {
	[DOTA_ModifyGold_CreepKill] = true,
	[DOTA_ModifyGold_NeutralKill] = true,
	[DOTA_ModifyGold_AbilityGold] = true,
	[DOTA_ModifyGold_HeroKill] = true,
	[DOTA_ModifyGold_RoshanKill] = true,
	[DOTA_ModifyGold_WardKill] = true,

	--bounty runes has seperate filter
	-- [DOTA_ModifyGold_BountyRune] = true,
}

_G.BASE_CREEPS_XP = {
	melee = 57,
	ranged = 69,
	siege = 88,
	super_melee = 25,
	super_ranged = 22,
	super_siege = 88,
	mega_melee = 25,
	mega_ranged = 22,
}

_G.CREEPS_UPGRADES_INTERVAL = {
	melee = {
		hp = 12,
		attack = 1,
		gold = 1,
	},
	ranged = {
		hp = 12,
		attack = 2,
		gold = 6,
	},
	super_melee = {
		hp = 19,
		attack = 2,
		gold = 1.5,
	},
	super_ranged = {
		hp = 18,
		attack = 3,
		gold = 6,
	},
	mega_melee = {
		hp = 0,
		attack = 0,
		gold = 1.5
	},
	mega_ranged= {
		hp = 0,
		attack = 0,
		gold = 6,
	},
}

_G.BOSS_SPAWN_ITEMS = {
	level_1 = {
		"item_kaya",
		"item_yasha",
		"item_sange",
		"item_blink",
		"item_hand_of_midas",
		"item_cyclone",
		"item_armlet",
		"item_blade_mail",
		"item_basher",
		"item_rod_of_atos",
		"item_echo_sabre",
		"item_cyclone",
		"item_vladmir",
		"item_invis_sword",
		"item_solar_crest",
		"item_maelstrom",
		"item_travel_boots",
	},
	level_2 = {
		"item_black_king_bar",
		"item_manta",
		"item_radiance",
		"item_desolator",
		"item_heavens_halberd",
		"item_sange_and_yasha",
		"item_pipe",
		"item_lotus_orb",
		"item_orchid",
		"item_sphere",
		"item_octarine_core",
		"item_moon_shard",
		"item_bloodstone",
		"item_hurricane_pike",
	},
	level_3 = {
		"item_bloodthorn",
		"item_shivas_guard",
		"item_assault",
		"item_monkey_king_bar",
		"item_refresher",
		"item_sheepstick",
		"item_dagon_5",
		"item_mjollnir",
		"item_abyssal_blade",
		"item_silver_edge",
		"item_satanic",
		"item_gungir",
		"item_wind_waker",
	},
}

--sometimes ability will not work if they are added to the hero (passive, or toggle)
--need to clear modifiers that are applied immediately after adding ability
--these modifiers will be reapplied when ability is learned.
function CAbilityDraftRanked:ClearBaseAbilityModifiers(hero, ability)
	if not hero or not ability then
		return
	end

	for _,modifier in ipairs(hero:FindAllModifiers()) do
		if modifier:GetAbility() == ability and not REQUIRED_BASE_ABILITY_MODIFIERS[modifier:GetName()] then
			modifier:Destroy()
		end
	end
end

function CAbilityDraftRanked:GetAllAvailableHeroNames()
	local result = {}

	for _, heroName in pairs(HERO_LIST) do
		if not TableContainsValue(self.allUsedAbilityHeroNames, heroName) then
			table.insert(result, heroName)
		end
	end

	return result
end

function CAbilityDraftRanked:GetAllAvailableJungleAbilities(excludeSelected)
	if excludeSelected then
		return self:GetAllNotSelectedJungleAbilities()
	end

	return shallowcopy(JUNGLE_ABILITIES)
end

function CAbilityDraftRanked:GetAllNotSelectedJungleAbilities()
	local result = {}

	for _, abilityName in pairs(JUNGLE_ABILITIES) do
		local canAdd = true

		if self.availableAbilities["jungle"] then
			for _, abilityData in pairs(self.availableAbilities["jungle"]) do
				if abilityData["ability_name"] and abilityData["ability_name"] == abilityName then
					canAdd = false
					break
				end
			end
		end

		if canAdd then
			table.insert(result, abilityName)
		end
	end

	return result
end

function CAbilityDraftRanked:IsJungleAbility(abilityName)
	return TableHasValue(JUNGLE_ABILITIES, abilityName)
end

function CAbilityDraftRanked:GetTalentTypeByName(talentName)
	local allTalents = self:GetBaseTreeTalents()

	if not allTalents then
		return ""
	end

	for _, data in pairs(allTalents) do
		for _, talent in pairs(data) do
			if talent["talent_name"] and talent["talent_name"] == talentName and talent["talent_type"] then
				return talent["talent_type"]
			end
		end
	end

	return ""
end

function CAbilityDraftRanked:GetBaseTreeTalents()
	return deepcopy(BASE_HERO_TALENTS)
end

function CAbilityDraftRanked:GetBaseTalentConnectedItemName(talentName)
	for _, talentsData in pairs(self:GetBaseTreeTalents()) do
		for _, talentData in pairs(talentsData) do
			if (talentData["talent_name"] == talentName) and talentData["item_name"] then
				return talentData["item_name"]
			end
		end
	end

	return ""
end


function CAbilityDraftRanked:GetHeroTalentAbilityHardCoded(talentName)
	local talents = {
		special_bonus_unique_dark_willow_bedlam_targets = "dark_willow_bedlam",
		special_bonus_unique_faceless_void_4  = "faceless_void_backtrack",
		special_bonus_unique_clockwerk_6 = "rattletrap_power_cogs",
		special_bonus_unique_drow_ranger_gust_invis = "drow_ranger_silence",
		special_bonus_unique_tusk_4 = "tusk_walrus_punch",
		special_bonus_unique_tusk = "tusk_walrus_punch",
		special_bonus_unique_monkey_king_12 = "monkey_king_mischief",
		special_bonus_unique_meepo_3 = "meepo_earthbind",
		special_bonus_unique_ogre_magi_dumb_luck_mana = "ogre_magi_dumb_luck",
		special_bonus_unique_beastmaster_5 = "beastmaster_call_of_the_wild_hawk",
		special_bonus_unique_nevermore_2 = "shadow_fiend_shadowraze_ad",
		special_bonus_unique_nevermore_7 = "shadow_fiend_shadowraze_ad",
		special_bonus_unique_nevermore_raze_procsattacks = "shadow_fiend_shadowraze_ad",
		special_bonus_unique_nevermore_shadowraze_cooldown = "shadow_fiend_shadowraze_ad",
		special_bonus_unique_bane_3 = "bane_fiends_grip_lua",
		special_bonus_unique_bane_9 = "bane_fiends_grip_lua",
	}

	if talents[talentName] then
		return talents[talentName]
	end

	return ""
end


function CAbilityDraftRanked:GetSpecialHeroAbilityNames(heroName)

	if SPECIAL_HERO_ABILITY_NAMES[heroName] then
		return SPECIAL_HERO_ABILITY_NAMES[heroName]
	end

	return nil
end

function CAbilityDraftRanked:GetHeroTalentNumbers(heroName)
	local baseNumbers = {10, 11, 12, 13, 14, 15, 16, 17}

	local heroData = DOTAGameManager:GetHeroDataByName_Script(heroName)

	if heroData and heroData["AbilityTalentStart"] and tonumber(heroData["AbilityTalentStart"]) then
		local talentStarts = tonumber(heroData["AbilityTalentStart"])

		if type(talentStarts) == "number" then
			local talentEnds = talentStarts + 7
			baseNumbers = {}
			
			for i = talentStarts, talentEnds, 1 do
				table.insert(baseNumbers, i)
			end
		end
	end

	-- DeepPrintTable(baseNumbers)
	return baseNumbers
end

function CAbilityDraftRanked:GetBaseTreeTalentName(heroName, talentLevel, talentPosition)

	-- print("szukam dla hero: ", heroName, " talentu na poziomie: ", talentLevel, " po stronie: ", talentPosition)
	local talentNumbers = self:GetHeroTalentNumbers(heroName)

	local talentNumber = nil

	if talentLevel == "level_1" then
		if #talentNumbers >= 2 then
			if talentPosition == "left" then
				talentNumber = talentNumbers[2]
			elseif talentPosition == "right" then
				talentNumber = talentNumbers[1]
			end
		end
	elseif talentLevel == "level_2" then
		if #talentNumbers >= 4 then
			if talentPosition == "left" then
				talentNumber = talentNumbers[4]
			elseif talentPosition == "right" then
				talentNumber = talentNumbers[3]
			end
		end
	elseif talentLevel == "level_3"  then
		if #talentNumbers >= 6 then
			if talentPosition == "left" then
				talentNumber = talentNumbers[6]
			elseif talentPosition == "right" then
				talentNumber = talentNumbers[5]
			end
		end
	elseif talentLevel == "level_4" then
		if #talentNumbers >= 8 then
			if talentPosition == "left" then
				talentNumber = talentNumbers[8]
			elseif talentPosition == "right" then
				talentNumber = talentNumbers[7]
			end
		end
	end

	if talentNumber then
		local heroData = DOTAGameManager:GetHeroDataByName_Script(heroName)
		local talentName = ""

		if heroData then
			talentName = heroData["Ability" .. talentNumber] or ""
		end

		if type(talentName) ~= "string" or not string.starts(talentName, "special_bonus_") or talentName == "special_bonus_attributes" then
			return ""
		end

		return talentName
	end
	
	return ""
end

function CAbilityDraftRanked:AddHeroTalentsToTable(heroName, tableToUpdate)
	for i = 1, 4, 1 do
		local talentLevelLabel = "level_" .. i

		if not tableToUpdate[talentLevelLabel] then
			tableToUpdate[talentLevelLabel] = {}
		end
	end

	local talentNumbers = self:GetHeroTalentNumbers(heroName)
	local heroData = DOTAGameManager:GetHeroDataByName_Script(heroName)

	if not heroData then
		return
	end

	local counter = 1
	for _, talentNumber in ipairs(talentNumbers) do
		local talentName = heroData["Ability" .. talentNumber]

		if talentName and type(talentName) == "string" and string.find(talentName, "special_bonus") and not EXCLUDED_HERO_TALENTS[talentName] then
			local talentLevel = "level_1"

			if counter <= 2 then
				talentLevel = "level_1"
			elseif counter <= 4 then
				talentLevel = "level_2"
			elseif counter <= 6 then
				talentLevel = "level_3"
			elseif counter <= 8 then
				talentLevel = "level_4"
			end

			--check if there is the same talent on this level
			local talentFound = false

			if tableToUpdate[talentLevel] then
				for _, tData in pairs(tableToUpdate[talentLevel]) do
					if tData["talent_name"] and tData["talent_name"] == talentName then
						talentFound = true
						break
					end
				end

				if not talentFound then
					local talentType = self:GetTalentTypeByName(talentName)
					if not talentType or talentType == "" then
						talentType = "hero_talent"
					end

					local abilityNames = {}
					local relation = "any"

					local abilityNamesData = self:GetAbilityNamesConnectedToTalent(heroName, talentName)

					if abilityNamesData then
						if abilityNamesData["ability_names"] and #abilityNamesData["ability_names"] > 0 then
							table.insert(abilityNames, abilityNamesData["ability_names"][1])

							if #abilityNamesData["ability_names"] > 1 then
								table.insert(abilityNames, abilityNamesData["ability_names"][2])
							end
						end

						if abilityNamesData["relation"] then
							relation = abilityNamesData["relation"]
						end
					end

					local talentData = {
						talent_name = talentName,
						talent_type = talentType,
						ability_names = abilityNames,
						relation = relation,
						picked = 0
					}

					-- if talentType == "hero_talent" and #abilityNames == 0 then
						-- 	print("no ability for talent hero: ", talentName)
					-- end

					table.insert(tableToUpdate[talentLevel], talentData)
				end
			end
		end
		counter = counter + 1
	end
end

function CAbilityDraftRanked:GetHeroValidTalentNamesOnLevels(heroName)
	local result = {
		level_1 = {},
		level_2 = {},
		level_3 = {},
		level_4 = {},
	}

	local data = {}

	self:AddHeroTalentsToTable(heroName, data)

	for talentLevel, talentsData in pairs(data) do
		if result[talentLevel] then

			for _, talentData in ipairs(talentsData) do
				if talentData["talent_name"] and talentData["talent_name"] ~= "" then
					local talentName = talentData["talent_name"]
					table.insert(result[talentLevel], talentName)
				end
			end

			for i = 1, 2, 1 do
				if not result[talentLevel][i] then
					if GOLD_TALENT_EQUIVALENT[talentLevel] then
						if i == 1 and GOLD_TALENT_EQUIVALENT[talentLevel][1] then
							table.insert(result[talentLevel], GOLD_TALENT_EQUIVALENT[talentLevel][1])
						elseif i == 2 and GOLD_TALENT_EQUIVALENT[talentLevel][2] then
							table.insert(result[talentLevel], GOLD_TALENT_EQUIVALENT[talentLevel][2])
						end
					end
				end
			end
		end
	end

	return result
end

--abilities that need hidden sub abilities, game will automatically swap them
function CAbilityDraftRanked:GetSubAbilityForBaseAbility(abilityName)
	if BASE_SUB_ABILITIES[abilityName] then
		return BASE_SUB_ABILITIES[abilityName]
	end

	return ""
end

--abilities that need to be added to make base ability work correctly
function CAbilityDraftRanked:GetOtherRequiredAbilities(abilityName)
	if REQUIRED_EXTRA_ABILITY[abilityName] then
		return REQUIRED_EXTRA_ABILITY[abilityName]
	end

	return {}
end

--list of ablities that will swap on auto-cast used in filter (orders)
function CAbilityDraftRanked:GetSwapAbilityName(abilityName)
	if SWAP_ABILITIES[abilityName] then
		return SWAP_ABILITIES[abilityName]
	end

	return ""
end

function CAbilityDraftRanked:GetScepterAndShardUpgradeInfo(abilityName)
	local abilityUpgrades = {
		upgrade_status = "",
		scepter_ability = "",
		shard_ability = "",
	}

	local abilitiesWithUltimateKey = {
		clinkz_death_pact = true
	}

	local abilityKV = GetAbilityKeyValuesByName(abilityName)
	if abilityKV then
		local upgradeStatus = ""
		local isUltimate = abilityKV["AbilityType"] == "DOTA_ABILITY_TYPE_ULTIMATE"

		local scepterUpgrade = abilityKV["HasScepterUpgrade"] and abilityKV["HasScepterUpgrade"] == 1
		local shardUpgrade = abilityKV["HasShardUpgrade"] and abilityKV["HasShardUpgrade"] == 1

		local checkingScepterKey = "AbilityDraftScepterAbility"
		local checkingShardKey = "AbilityDraftShardAbility"

		if isUltimate or abilitiesWithUltimateKey[abilityName] then
			checkingScepterKey = "AbilityDraftUltScepterAbility"
			checkingShardKey = "AbilityDraftUltShardAbility"
		end

		if abilityKV[checkingScepterKey] and abilityKV[checkingScepterKey] ~= 0 and abilityKV[checkingScepterKey] ~= "" then
			abilityUpgrades["scepter_ability"] = abilityKV[checkingScepterKey]
		end

		if abilityKV[checkingShardKey] and abilityKV[checkingShardKey] ~= 0 and abilityKV[checkingShardKey] ~= "" then
			abilityUpgrades["shard_ability"] = abilityKV[checkingShardKey]
		end

		local newScepterUpgrade = SCEPTER_NEW_ABILITIES[abilityName] or ""

		if (scepterUpgrade or abilityUpgrades["scepter_ability"] ~= "" or newScepterUpgrade ~= "") then
			upgradeStatus = "scepter"

			if abilityUpgrades["scepter_ability"] == "" then

				--special scepter upgrade 
				if newScepterUpgrade ~= "" then
					abilityUpgrades["scepter_ability"] = newScepterUpgrade
				
				--scepter upgrade is for base ability
				else
					abilityUpgrades["scepter_ability"] = abilityName
				end
			end

			local requiredAbility = self:GetScepterShardUpgradeRequiredOtherAbilityName(abilityName, "scepter")

			if requiredAbility ~= "" then
				abilityUpgrades["scepter_need_ability"] = requiredAbility
			end
		end

		local newShardUpgrade = SHARD_NEW_ABILITIES[abilityName] or ""

		if shardUpgrade or abilityUpgrades["shard_ability"] ~= "" or newShardUpgrade ~= "" then
			upgradeStatus = upgradeStatus .. "_shard"

			if abilityUpgrades["shard_ability"] == "" then

				--special shard upgrade 
				if newShardUpgrade ~= "" then
					abilityUpgrades["shard_ability"] = newShardUpgrade
				
				--shard upgrade is for base ability
				else
					abilityUpgrades["shard_ability"] = abilityName
				end
			end

			local requiredAbility = self:GetScepterShardUpgradeRequiredOtherAbilityName(abilityName, "shard")

			if requiredAbility ~= "" then
				abilityUpgrades["shard_need_ability"] = requiredAbility
			end
		end

		abilityUpgrades["upgrade_status"] = upgradeStatus
	end

	return abilityUpgrades
end

function CAbilityDraftRanked:GetScepterShardUpgradeRequiredOtherAbilityName(abilityName, upgradeType)
	local requiredScepterAbility = {
		mirana_arrow = "mirana_starfall",
		sandking_sand_storm = "sandking_burrowstrike",
		abaddon_borrowed_time = "abaddon_death_coil",
		axe_berserkers_call = "axe_battle_hunger",
		bounty_hunter_shuriken_toss = "bounty_hunter_jinada",
		faceless_void_time_walk = "faceless_void_time_lock",
		medusa_mystic_snake = "medusa_stone_gaze",
		pangolier_shield_crash = "pangolier_swashbuckle",
		zuus_thundergods_wrath = "zuus_lightning_bolt"
	}

	local requiredShardAbility = {
		weaver_shukuchi = "weaver_geminate_attack",
		batrider_flamebreak = "batrider_sticky_napalm",
		-- chaos_knight_chaos_bolt = "chaos_knight_phantasm",
		dark_willow_cursed_crown = "dark_willow_bramble_maze",
		earthshaker_fissure = "earthshaker_aftershock",
		gyrocopter_homing_missile = "gyrocopter_rocket_barrage",
		shadow_shaman_shackles = "shadow_shaman_mass_serpent_ward",
		slardar_slithereen_crush = "slardar_amplify_damage",
		ursa_earthshock = "ursa_enrage",
		winter_wyvern_cold_embrace = "winter_wyvern_splinter_blast",
	}


	if upgradeType == "scepter" and requiredScepterAbility[abilityName] then
		return requiredScepterAbility[abilityName]
	end

	if upgradeType == "shard" and requiredShardAbility[abilityName] then
		return requiredShardAbility[abilityName]
	end

	return ""
end

function CAbilityDraftRanked:GetBaseHeroStats(heroName)
	local heroBaseValues = {}

	local heroMainAttrToInt = {
		DOTA_ATTRIBUTE_STRENGTH = 0,
		DOTA_ATTRIBUTE_AGILITY = 1,
		DOTA_ATTRIBUTE_INTELLECT = 2,
		DOTA_ATTRIBUTE_ALL = 3,
	}

	local heroBaseValuesAttr = {
		base_str = "AttributeBaseStrength",
		base_agi = "AttributeBaseAgility",
		base_int = "AttributeBaseIntelligence",
		str_per_level = "AttributeStrengthGain",
		agi_per_level = "AttributeAgilityGain",
		int_per_level = "AttributeIntelligenceGain",
		damage_min = "AttackDamageMin",
		damage_max = "AttackDamageMax",
		attack_rate = "AttackRate",
		attack_range = "AttackRange",
		armor = "ArmorPhysical",
		magic_resistance = "MagicalResistance",
		movement_speed = "MovementSpeed",
		max_health = "StatusHealth",
		health_regen = "StatusHealthRegen",
		max_mana = "StatusMana",
		mana_regen = "StatusManaRegen",
		turn_rate = "MovementTurnRate",
		
		-- currently not used:
		-- projectile_speed = 0,
		-- day_sight_range = 0,
		-- night_sight_range = 0,
	}

	local heroData = DOTAGameManager:GetHeroDataByName_Script(heroName)

	if heroData then
		heroBaseValues["magic_resistance"] = 25
		heroBaseValues["turn_rate"] = 0.6
		heroBaseValues["base_str"] = 0

		if heroBaseValuesAttr["base_str"] then
			local baseValue = heroData[heroBaseValuesAttr["base_str"]] or 0

			if tonumber(baseValue) then
				heroBaseValues["base_str"] = tonumber(baseValue) or 0
			end
		end

		if heroBaseValuesAttr["base_agi"] then
			local baseValue = heroData[heroBaseValuesAttr["base_agi"]] or 0
			
			if tonumber(baseValue) then
				heroBaseValues["base_agi"] = tonumber(baseValue) or 0
			end
		end

		if heroBaseValuesAttr["base_int"] then
			local baseValue = heroData[heroBaseValuesAttr["base_int"]] or 0
			
			if tonumber(baseValue) then
				heroBaseValues["base_int"] = tonumber(baseValue) or 0
			end
		end

		local mainAttr = heroData["AttributePrimary"] or ""
		local mainAttrInt = -1

		if mainAttr and heroMainAttrToInt[mainAttr] then
			mainAttrInt = heroMainAttrToInt[mainAttr]
		end

		for key, attr in pairs(heroBaseValuesAttr) do
			if key ~= "base_str" and key ~= "base_agi" and key ~= "base_int" then
				local totalValue = 0

				if heroData[attr] and tonumber(heroData[attr]) and heroData[attr] ~= 0 then
					totalValue = heroData[attr]
				elseif heroBaseValues[key] and tonumber(heroBaseValues[key]) then
					totalValue = heroBaseValues[key]
				end

				if tonumber(totalValue) then
					if key == "damage_min" then
						if mainAttrInt == 0 and heroBaseValues["base_str"] and tonumber(heroBaseValues["base_str"]) then
							totalValue = totalValue + heroBaseValues["base_str"]
						end

						if mainAttrInt == 1 and heroBaseValues["base_agi"] and tonumber(heroBaseValues["base_agi"]) then
							totalValue = totalValue + heroBaseValues["base_agi"]
						end

						if mainAttrInt == 2 and heroBaseValues["base_int"] and tonumber(heroBaseValues["base_int"]) then
							totalValue = totalValue + heroBaseValues["base_int"]
						end

						if mainAttrInt == 3 and heroBaseValues["base_str"] and tonumber(heroBaseValues["base_str"]) and 
							heroBaseValues["base_int"] and tonumber(heroBaseValues["base_int"]) and 
							heroBaseValues["base_agi"] and tonumber(heroBaseValues["base_agi"])
							then
							totalValue = totalValue + 0.69697 * heroBaseValues["base_str"] +  0.69697 * heroBaseValues["base_agi"] +  0.69697 * heroBaseValues["base_int"]
						end
					elseif key == "damage_max" then
							if mainAttrInt == 0 and heroBaseValues["base_str"] and tonumber(heroBaseValues["base_str"]) then
								totalValue = totalValue + heroBaseValues["base_str"]
							end
	
							if mainAttrInt == 1 and heroBaseValues["base_agi"] and tonumber(heroBaseValues["base_agi"]) then
								totalValue = totalValue + heroBaseValues["base_agi"]
							end
	
							if mainAttrInt == 2 and heroBaseValues["base_int"] and tonumber(heroBaseValues["base_int"]) then
								totalValue = totalValue + heroBaseValues["base_int"]
							end
	
							if mainAttrInt == 3 and heroBaseValues["base_str"] and tonumber(heroBaseValues["base_str"]) and 
								heroBaseValues["base_int"] and tonumber(heroBaseValues["base_int"]) and 
								heroBaseValues["base_agi"] and tonumber(heroBaseValues["base_agi"])
								then
								totalValue = totalValue + 0.69697 * heroBaseValues["base_str"] +  0.69697 * heroBaseValues["base_agi"] +  0.69697 * heroBaseValues["base_int"]
							end
					elseif key == "armor" then
						if heroBaseValues["base_agi"] and tonumber(heroBaseValues["base_agi"]) then
							totalValue = totalValue + 0.167 * heroBaseValues["base_agi"]
						end
					elseif key == "max_health" then
						if heroBaseValues["base_str"] and tonumber(heroBaseValues["base_str"]) then
							totalValue = totalValue + 22 * heroBaseValues["base_str"]
						end
					elseif key == "max_mana" then
						if heroBaseValues["base_int"] and tonumber(heroBaseValues["base_int"]) then
							totalValue = totalValue + 12 * heroBaseValues["base_int"]
						end
					elseif key == "mana_regen" then
						if heroBaseValues["base_int"] and tonumber(heroBaseValues["base_int"]) then
							totalValue = totalValue + 0.05 * heroBaseValues["base_int"]
						end
					elseif key == "health_regen" then
						if heroBaseValues["base_str"] and tonumber(heroBaseValues["base_str"]) then
							totalValue = totalValue + 0.1 * heroBaseValues["base_str"]
						end
					end
				end

				heroBaseValues[key] = totalValue
			end
		end
	end

	if self.spellsUpgrade and self.spellsUpgrade:IsAnySpecialUpgradeAvailable(heroName) then
		heroBaseValues["special_upgrades"] = self.spellsUpgrade:GetSpecialUpgradesDescription(heroName)
	end

	return heroBaseValues
end

function CAbilityDraftRanked:GetSelectedHeroesAllTalentsData()
	local allHeroTalents = self.allSelectedHeroTalents
	local allGeneralTalents = self:GetBaseTreeTalents()

	local allAvailableTalents = {
		level_1 = {},
		level_2 = {},
		level_3 = {},
		level_4 = {},
	}

	local heroTalentsCountOnLevels = {
		level_1 = 0,
		level_2 = 0,
		level_3 = 0,
		level_4 = 0,
	}

	for talentLevel, talentsData in pairs(allHeroTalents) do
		if allAvailableTalents[talentLevel] then
			allAvailableTalents[talentLevel] = deepcopy(talentsData)
		end

		if heroTalentsCountOnLevels[talentLevel] and type(talentsData) == "table" then
			for _, talentData in pairs(talentsData) do
				if talentData["talent_type"] == "hero_talent" then
					heroTalentsCountOnLevels[talentLevel] = heroTalentsCountOnLevels[talentLevel] + 1
				end
			end
		end
	end

	--Add general talents (like +250 dmg, +50 atttack speed)
	for talentLevel, talentsData in pairs(allGeneralTalents) do
		if allAvailableTalents[talentLevel] then
			for _, talentData in pairs(talentsData) do
				if talentData["talent_name"] and talentData["item_name"] and talentData["talent_type"] then

					local talentAlreadyExist = false
					for _, existTalentData in pairs(allAvailableTalents[talentLevel]) do
						if existTalentData["talent_name"] and existTalentData["talent_name"] == talentData["talent_name"] then
							talentAlreadyExist = true
							break
						end
					end

					if not talentAlreadyExist then
						table.insert(allAvailableTalents[talentLevel], {
							talent_name = talentData["talent_name"],
							talent_type = talentData["talent_type"],
							ability_names = {talentData["item_name"]},
							custom_icon = talentData["custom_icon"],
							picked = 0
						})
					end
				end
			end
		end
	end

	return {
		talents = allAvailableTalents,
		hero_talents_count = heroTalentsCountOnLevels
	}
end

function CAbilityDraftRanked:GetRandomMonkeyKingTreeModel(unit)
	local result = {
		model = "models/props_tree/tree_oak_00.vmdl",
		scale = 1,
		color = {}
	}

	local models = {
		[1] = {"models/props_tree/dire_tree002.vmdl", 1},
		[2] = {"models/props_tree/dire_tree004b_sfm.vmdl", 1},
		[3] = {"models/props_tree/dire_tree007_sfm.vmdl", .5},
		[4] = {"models/props_tree/tree_oak_01_sfm.vmdl", 0.5},
		[5] = {"models/props_tree/tree_oak_00.vmdl", 1},
		[6] = {"models/props_tree/tree_oak_01b_sfm.vmdl", 0.8},
		[7] = {"models/props_tree/tree_oak_02_sfm.vmdl", 0.35},
	}

	local treeSide = "radiant"
	local angle = AngleDiff(VectorAngles(Vector(0,0,0)).y, VectorAngles(unit:GetAbsOrigin()).y)

	if angle and angle > -153 and angle < 27 then
		treeSide = "dire"
	end

	local chance = RandomInt(4, 7)
	if treeSide == "dire" then
		chance = RandomInt(1, 3)
	end

	-- If the treespot is in the water river area, spawn only leafless trees
	if unit:GetAbsOrigin().z and unit:GetAbsOrigin().z == 0 then
		chance = RandomInt(1, 3)
	end

	result["model"] = models[chance][1]
	result["scale"] = models[chance][2]

	if chance == 4 or chance == 5 or chance == 6 then
		result["color"] = models[chance][3]
	end

	return result
end

function CAbilityDraftRanked:IsHeroRangedAttacker(heroName)
	local heroData = DOTAGameManager:GetHeroDataByName_Script(heroName)

	if heroData and heroData["AttackCapabilities"] then
		if heroData["AttackCapabilities"] == "DOTA_UNIT_CAP_RANGED_ATTACK" then
			return true
		end
	end

	return false
end

function CAbilityDraftRanked:CreateSpellsUpgradeList(abilityName, attemptCounter)
	if not attemptCounter or attemptCounter > 20 then
		return
	end

	if not abilityName or abilityName == "" then
		return
	end

	local abilityKeyValues = GetAbilityKeyValuesByName(abilityName)

	if not abilityKeyValues then
		return
	end

	local excludedStringWords = {
		"AbilityCooldown",
		"AbilityManaCost",

		"Tooltip",
		"tooltip",
		"shard",
		"scepter",
		"var_type",
		"RequiresShard",
		"RequiresScepter",
		"LinkedSpecialBonus",
		"LinkedSpecialBonusOperation",
		"LinkedSpecialBonusField"
	}

	local abilityAvailableUpgrades = {}

	-- New Abilities with AbilityValues kv block
	if abilityKeyValues['AbilityValues'] then
		for abilityProperty, _ in pairs(abilityKeyValues['AbilityValues']) do
			if not _G.EXCLUDED_SPELL_UPGRADE_PROPERTIES[abilityName] or not _G.EXCLUDED_SPELL_UPGRADE_PROPERTIES[abilityName][abilityProperty] then
				local isPropertyContainsExcludedWords = false

				for _, word in pairs(excludedStringWords) do
					if string.find(abilityProperty, word) then
						isPropertyContainsExcludedWords = true
						break
					end
				end
	
				if not isPropertyContainsExcludedWords or
					(SPELL_FORCED_PROPERTY_UPGRADES[abilityName] and SPELL_FORCED_PROPERTY_UPGRADES[abilityName][abilityProperty]) 
				then
					local toolTip = "#DOTA_Tooltip_ability_" .. abilityName
					local toolTipProperty = "#DOTA_Tooltip_ability_" .. abilityName .. "_" .. abilityProperty
					table.insert(abilityAvailableUpgrades,
						{
							ability_name = abilityName,
							ability_property = abilityProperty,
							ability_tooltip_name = toolTip,
							ability_tooltip_property_name = toolTipProperty,
						}
					)
				end
			end
		end
		
	-- Old Abilities with AbilitySpecial kv block
	elseif abilityKeyValues['AbilitySpecial'] then
		for _, abilityValues in pairs(abilityKeyValues['AbilitySpecial']) do
			for abilityProperty, _ in pairs(abilityValues) do
				if not _G.EXCLUDED_SPELL_UPGRADE_PROPERTIES[abilityName] or not _G.EXCLUDED_SPELL_UPGRADE_PROPERTIES[abilityName][abilityProperty] then
					local isPropertyContainsExcludedWords = false

					for _, word in pairs(excludedStringWords) do
						if string.find(abilityProperty, word) then
							isPropertyContainsExcludedWords = true
							break
						end
					end

					if not isPropertyContainsExcludedWords then
						local toolTip = "#DOTA_Tooltip_ability_" .. abilityName
						local toolTipProperty = "#DOTA_Tooltip_ability_" .. abilityName .. "_" .. abilityProperty
						table.insert(abilityAvailableUpgrades,
							{
								ability_name = abilityName,
								ability_property = abilityProperty,
								ability_tooltip_name = toolTip,
								ability_tooltip_property_name = toolTipProperty,
							}
						)
					end
				end
			end
		end
	end

	local players = self:GetAllPlayersConnectedFromLobby()
	
	--sent event to first available player to get localizations
	for i = 1, #players, 1 do
		if #players > 0 then
			local randomTableIndex = RandomInt(1, #players)

			local playerID = players[randomTableIndex] or 0

			if PlayerResource:IsValidPlayer(playerID) and PlayerResource:GetPlayer(playerID) and 
				PlayerResource:GetConnectionState(playerID) == DOTA_CONNECTION_STATE_CONNECTED 
			then
				CustomGameEventManager:Send_ServerToPlayer( PlayerResource:GetPlayer(playerID), "find_ability_localizations", 
															{
																ability_name = abilityName,
																data = abilityAvailableUpgrades,
															}
				)
				
				break
			end

			table.remove(players, randomTableIndex)
		end
	end

	Timers:CreateTimer(1 + attemptCounter, function ()
		if self.boostedAbilities[abilityName] and not self.boostedAbilities[abilityName]["upgrades_localizated"] then
			print("ability: ", abilityName, " didn't lozalizated, attempt nr: ", attemptCounter +1)
			self:CreateSpellsUpgradeList(abilityName, attemptCounter + 1)
		else
			print("ability: ", abilityName, " localizated")
		end
	end)
end